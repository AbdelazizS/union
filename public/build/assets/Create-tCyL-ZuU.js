import{r as u,j as e,$ as E,m as h}from"./app-D5zgOKAD.js";import{u as T,F as _,a as n,b as c,c as i,d as l,e as d}from"./form-B0NGfjOj.js";import{s as k}from"./zod-CTB78kiI.js";import{o as P,s as m,b as V,a as B}from"./index-DWbN24nP.js";import{t as j}from"./index-CDOhrpKr.js";import{B as p}from"./index-C8-8ZKTM.js";import{I as S}from"./input-D5FKwQjB.js";import{T as L}from"./textarea-rFmGb7jf.js";import{S as z,a as A,b as D,c as R,d as U}from"./select-DgOef9zO.js";import{S as $}from"./switch-CQMIwMOV.js";import"./card-BKGLJ8p-.js";import{L as M}from"./AdminLayout-BQ9sENZH.js";import{I as X}from"./image-upload-DB-EMDCR.js";import{P as q}from"./plus-DHVrmD6B.js";import{X as G}from"./x-DkObbUL-.js";import"./label-BHpa9F8K.js";import"./index-BBAzO_4d.js";import"./index-BSVezLny.js";import"./index-Crc4BVh8.js";import"./Combination-Cmb1a147.js";import"./tslib.es6-CmEaCU22.js";import"./index-BB6OtDRK.js";import"./index-DNxp1Wi1.js";import"./index-BKYgjeKX.js";import"./index-CrEWOBzh.js";import"./chevron-down-CztE_ilu.js";import"./createLucideIcon-AWgR876W.js";import"./check-BhB20Pym.js";import"./separator-ZBq7OQqG.js";import"./sheet-CpllKNoK.js";import"./index-B6dbISNz.js";import"./index-Cuq-Mmvq.js";import"./layers-ai9ES5Yn.js";import"./calendar-CP_I-VWs.js";import"./circle-help-DHWhEvao.js";import"./file-text-CyaKJaEx.js";import"./dropdown-menu-CixTnASt.js";import"./chevron-right-DKEmXFr0.js";import"./user-Ch48qi0I.js";import"./index-D8untdAM.js";const H=P({name:m().min(2,"Name must be at least 2 characters"),category_id:m().min(1,"Please select a category"),description:m().min(10,"Description must be at least 10 characters"),features:B(m()).optional(),is_active:V().default(!0),image:m().optional()});function Ve({categories:y}){const[o,x]=u.useState([""]),[g,v]=u.useState(!1),[b,f]=u.useState(null),t=T({resolver:k(H),defaultValues:{name:"",category_id:"",description:"",features:[""],is_active:!0,image:""}}),C=async r=>{v(!0);try{await h.post(route("admin.services.store"),{...r,features:o.filter(Boolean)},{onSuccess:()=>{j.success("Service created successfully"),h.visit(route("admin.services.index"))},onError:s=>{console.log(s),j.error(s.message||"Something went wrong")}})}catch(s){console.error("Error creating service:",s),j.error("Failed to create service")}finally{v(!1)}},N=()=>{x([...o,""])},F=r=>{x(o.filter((s,a)=>a!==r))},w=(r,s)=>{const a=[...o];a[r]=s,x(a)},I=r=>{t.setValue("image",r),f(r)};return e.jsxs(M,{children:[e.jsx(E,{title:"Create Service"}),e.jsx("div",{className:"container mx-auto py-10 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Create New Service"}),e.jsx(_,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(C),className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(n,{control:t.control,name:"name",render:({field:r})=>e.jsxs(c,{children:[e.jsx(i,{children:"Name"}),e.jsx(l,{children:e.jsx(S,{placeholder:"Enter service name",...r})}),e.jsx(d,{})]})}),e.jsx(n,{control:t.control,name:"category_id",render:({field:r})=>e.jsxs(c,{children:[e.jsx(i,{children:"Category"}),e.jsxs(z,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(l,{children:e.jsx(A,{children:e.jsx(D,{placeholder:"Select a category"})})}),e.jsx(R,{children:y.map(s=>e.jsx(U,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx(d,{})]})})]}),e.jsx(n,{control:t.control,name:"description",render:({field:r})=>e.jsxs(c,{children:[e.jsx(i,{children:"Description"}),e.jsx(l,{children:e.jsx(L,{placeholder:"Enter service description",className:"min-h-[100px]",...r})}),e.jsx(d,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Features"}),e.jsxs(p,{type:"button",variant:"outline",size:"sm",onClick:N,children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Add Feature"]})]}),o.map((r,s)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{value:r,onChange:a=>w(s,a.target.value),placeholder:"Enter feature"}),e.jsx(p,{type:"button",variant:"ghost",size:"icon",onClick:()=>F(s),children:e.jsx(G,{className:"h-4 w-4"})})]},s))]}),e.jsx(n,{control:t.control,name:"image",render:({field:r})=>e.jsxs(c,{children:[e.jsx(i,{children:"Service Image"}),e.jsx(l,{children:e.jsx(X,{value:b,onChange:I,onRemove:()=>{f(null),r.onChange("")}})}),e.jsx(d,{})]})}),e.jsx(n,{control:t.control,name:"is_active",render:({field:r})=>e.jsxs(c,{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Active Status"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Enable or disable this service"})]}),e.jsx(l,{children:e.jsx($,{checked:r.value,onCheckedChange:r.onChange})})]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>h.visit(route("admin.services.index")),children:"Cancel"}),e.jsx(p,{type:"submit",disabled:g,children:g?"Creating...":"Create Service"})]})]})})]})})]})}export{Ve as default};
