import{r as S,j as e,$ as R}from"./app-DN1qyw_4.js";import{L as $}from"./AdminLayout-CZ0FKSeN.js";import{C as m,b as d,c as p,a as x}from"./card-B1emr2ze.js";import{D as B}from"./data-table-lNLW6wDK.js";import"./index-LX2bqK-N.js";import"./popover-BBU7GkUU.js";import{B as T}from"./briefcase-DJEN-vSL.js";import{C as F}from"./calendar-CNUueBHR.js";import{P as L}from"./pound-sterling-Bh_ZhSJ7.js";import{c as f}from"./createLucideIcon-BpMd3PhH.js";import{R as v,C as D,X as K,Y as b,T as y,r as k,B as N,a as P}from"./generateCategoricalChart-D84JYhbJ.js";import{B as M,A as O}from"./BarChart-C1wfmkI8.js";import{P as z,a as I}from"./PieChart-BL1rbe_v.js";import{A as H}from"./arrow-up-right-C_Vbislx.js";import"./input-DGoI5Joj.js";import"./separator-CvwyiO9a.js";import"./sheet-mSlUcbMw.js";import"./index-Be8rxKK8.js";import"./index-BMWwzzsh.js";import"./Combination-CFYBKmqt.js";import"./index-BbdZmysQ.js";import"./tslib.es6-BUas5LQb.js";import"./index-D7fmTsiv.js";import"./x-w-3jbt9P.js";import"./index-DHYjMWsS.js";import"./index-RM6Jqcin.js";import"./index-qC52FuWJ.js";import"./message-square-2aVn-Bt6.js";import"./circle-help-dDNQ1wQ3.js";import"./file-text-D1ogXrnk.js";import"./index-COa0dWTm.js";import"./dropdown-menu-Dup2U6KE.js";import"./index-BAOtmrvp.js";import"./chevron-right-DqXEnUok.js";import"./check-BX_ytt3u.js";import"./user-CNfi-Wmw.js";import"./table-BzJnXkzV.js";import"./select-FtBAXfob.js";import"./index-DN810jkT.js";import"./chevron-down-DHOMMINn.js";import"./format-SmSpYad1.js";import"./chevron-left-CW_H48r7.js";import"./index-_Y-GkwGe.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],G=f("activity",E);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Y=f("chart-pie",X);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],W=f("table",U),u={blue:"#3b82f6",purple:"#8b5cf6",teal:"#14b8a6",amber:"#f59e0b",rose:"#f43f5e"},C=({active:r,payload:a,label:i})=>r&&a&&a.length?e.jsxs("div",{className:"rounded-lg border bg-card/95 backdrop-blur-sm px-3 py-2 shadow-lg",children:[e.jsx("p",{className:"mb-2 font-medium border-b pb-1",children:i}),a.map((n,l)=>e.jsxs("p",{className:"flex items-center gap-2 text-sm py-1",children:[e.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:n.color}}),e.jsxs("span",{className:"text-muted-foreground",children:[n.name,":"]}),e.jsxs("span",{className:"font-medium tabular-nums",children:[n.name.includes("Revenue")?"£":"",n.value.toLocaleString()]})]},l))]}):null,g=({title:r,value:a,change:i,icon:n,color:l,metric:c})=>e.jsxs(m,{className:"relative overflow-hidden transition-all hover:shadow-md",children:[e.jsx("div",{className:"absolute right-0 top-0 h-full w-[1px] bg-gradient-to-b from-transparent via-border to-transparent"}),e.jsxs(d,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-md ${l}`,children:e.jsx(n,{className:"h-4 w-4 text-white"})}),r]})}),e.jsxs("span",{className:`text-xs font-medium flex items-center gap-1 ${i>=0?"text-emerald-600":"text-rose-600"}`,children:[i>=0?e.jsx(H,{className:"h-3 w-3"}):e.jsx(O,{className:"h-3 w-3"}),Math.abs(i),"%"]})]}),e.jsx(x,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight",children:typeof a=="number"?a.toLocaleString():a}),c&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:c})]})})]}),q=[{accessorKey:"name",header:"Service Name"},{accessorKey:"category",header:"Category"},{accessorKey:"total_bookings",header:"Total Bookings"},{accessorKey:"total_revenue",header:"Total Revenue",cell:({row:r})=>{const a=r.original.total_revenue;return`£${(typeof a=="number"?a:typeof a=="string"?parseFloat(a):0).toFixed(2)}`}},{accessorKey:"average_revenue",header:"Average Revenue",cell:({row:r})=>{const a=r.original.average_revenue;return`£${(typeof a=="number"?a:typeof a=="string"?parseFloat(a):0).toFixed(2)}`}}];function Oe({services:r,dateRange:a}){const[i,n]=S.useState([new Date(a.start),new Date(a.end)]),l=r.reduce((t,s)=>{const o=s.total_revenue;return t+(typeof o=="number"?o:parseFloat(o)||0)},0),c=r.reduce((t,s)=>t+s.total_bookings,0),w=l/c,_=[...r].sort((t,s)=>s.total_bookings-t.total_bookings).slice(0,5).map(t=>({name:t.name,bookings:t.total_bookings,revenue:parseFloat(t.total_revenue),avgRevenue:parseFloat(t.total_revenue)/t.total_bookings})),A=r.reduce((t,s)=>{const o=s.category;return t[o]||(t[o]=0),t[o]+=parseFloat(s.total_revenue),t},{}),j=Object.entries(A).map(([t,s])=>({name:t,value:s,percentage:(s/l*100).toFixed(1)})).sort((t,s)=>s.value-t.value),h={services:8.5,bookings:12.3,revenue:15.7};return e.jsxs($,{children:[e.jsx(R,{title:"Services Analytics"}),e.jsxs("div",{className:"container mx-auto py-8 space-y-8 px-4",children:[e.jsx("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Services Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Comprehensive analysis and performance metrics"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(g,{title:"Active Services",value:r.length,change:h.services,icon:T,color:"bg-primary",metric:"Total available services"}),e.jsx(g,{title:"Total Bookings",value:c.toLocaleString(),change:h.bookings,icon:F,color:"bg-primary",metric:`${(c/r.length).toFixed(1)} avg. per service`}),e.jsx(g,{title:"Total Revenue",value:`£${l.toLocaleString()}`,change:h.revenue,icon:L,color:"bg-primary",metric:`£${w.toFixed(2)} avg. per booking`})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(m,{children:[e.jsx(d,{children:e.jsxs(p,{className:"flex items-center gap-2 text-base",children:[e.jsx(G,{className:"h-5 w-5 text-primary"}),"Service Performance Metrics"]})}),e.jsx(x,{className:"h-[400px]",children:e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(M,{data:_,margin:{left:10},children:[e.jsx("defs",{children:Object.entries(u).map(([t,s],o)=>e.jsxs("linearGradient",{id:`gradient${o}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:s,stopOpacity:.8}),e.jsx("stop",{offset:"100%",stopColor:s,stopOpacity:.2})]},t))}),e.jsx(D,{strokeDasharray:"3 3",className:"stroke-muted/30"}),e.jsx(K,{dataKey:"name",angle:-45,textAnchor:"end",height:100,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(b,{yAxisId:"left",tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(b,{yAxisId:"right",orientation:"right",tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(y,{content:e.jsx(C,{})}),e.jsx(k,{}),e.jsx(N,{yAxisId:"left",dataKey:"bookings",fill:"url(#gradient0)",name:"Bookings",radius:[4,4,0,0]}),e.jsx(N,{yAxisId:"right",dataKey:"revenue",fill:"url(#gradient1)",name:"Revenue ($)",radius:[4,4,0,0]})]})})})]}),e.jsxs(m,{children:[e.jsx(d,{children:e.jsxs(p,{className:"flex items-center gap-2 text-base",children:[e.jsx(Y,{className:"h-5 w-5 text-primary"}),"Revenue Distribution by Category"]})}),e.jsx(x,{className:"h-[400px]",children:e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(z,{children:[e.jsx(I,{data:j,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:130,innerRadius:85,label:({name:t,percentage:s})=>`${t} (${s}%)`,labelLine:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1},children:j.map((t,s)=>e.jsx(P,{fill:Object.values(u)[s%Object.keys(u).length]},`cell-${s}`))}),e.jsx(y,{content:e.jsx(C,{})}),e.jsx(k,{})]})})})]})]}),e.jsxs(m,{children:[e.jsx(d,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-primary"}),"Service Performance Details"]})}),e.jsx(x,{children:e.jsx(B,{columns:q,data:r})})]})]})]})}export{Oe as default};
