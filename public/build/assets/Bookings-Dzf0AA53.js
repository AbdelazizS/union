import{r as f,j as e,$ as M}from"./app-DN1qyw_4.js";import{L as $,a as B}from"./AdminLayout-CZ0FKSeN.js";import{C as n,b as d,c,a as m}from"./card-B1emr2ze.js";import{D as L}from"./date-range-picker-D00AoBHC.js";import{B as p}from"./badge-uQ6I-SGo.js";import{P,c as F}from"./index-LX2bqK-N.js";import{c as S}from"./index-BMWwzzsh.js";import{T as E,A as G,a as _}from"./AreaChart-jKXRGv4z.js";import{R as O,C as q,X as V,Y as k,T as U}from"./generateCategoricalChart-D84JYhbJ.js";import{T as X}from"./tag-DEHtUp1q.js";import{C as K}from"./chart-column-DZ5ZSmaW.js";import{f as N}from"./format-SmSpYad1.js";import"./input-DGoI5Joj.js";import"./separator-CvwyiO9a.js";import"./sheet-mSlUcbMw.js";import"./index-Be8rxKK8.js";import"./Combination-CFYBKmqt.js";import"./index-BbdZmysQ.js";import"./tslib.es6-BUas5LQb.js";import"./index-D7fmTsiv.js";import"./x-w-3jbt9P.js";import"./createLucideIcon-BpMd3PhH.js";import"./index-DHYjMWsS.js";import"./index-RM6Jqcin.js";import"./index-qC52FuWJ.js";import"./calendar-CNUueBHR.js";import"./message-square-2aVn-Bt6.js";import"./circle-help-dDNQ1wQ3.js";import"./file-text-D1ogXrnk.js";import"./index-COa0dWTm.js";import"./dropdown-menu-Dup2U6KE.js";import"./index-BAOtmrvp.js";import"./chevron-right-DqXEnUok.js";import"./check-BX_ytt3u.js";import"./user-CNfi-Wmw.js";import"./popover-BBU7GkUU.js";import"./chevron-left-CW_H48r7.js";import"./index-_Y-GkwGe.js";var y="Progress",b=100,[Y,Ee]=S(y),[z,H]=Y(y),D=f.forwardRef((s,r)=>{const{__scopeProgress:l,value:t=null,max:i,getValueLabel:g=W,...v}=s;(i||i===0)&&!w(i)&&console.error(J(`${i}`,"Progress"));const o=w(i)?i:b;t!==null&&!C(t,o)&&console.error(Q(`${t}`,"Progress"));const a=C(t,o)?t:null,j=h(a)?g(a,o):void 0;return e.jsx(z,{scope:l,value:a,max:o,children:e.jsx(P.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":h(a)?a:void 0,"aria-valuetext":j,role:"progressbar","data-state":T(a,o),"data-value":a??void 0,"data-max":o,...v,ref:r})})});D.displayName=y;var R="ProgressIndicator",A=f.forwardRef((s,r)=>{const{__scopeProgress:l,...t}=s,i=H(R,l);return e.jsx(P.div,{"data-state":T(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...t,ref:r})});A.displayName=R;function W(s,r){return`${Math.round(s/r*100)}%`}function T(s,r){return s==null?"indeterminate":s===r?"complete":"loading"}function h(s){return typeof s=="number"}function w(s){return h(s)&&!isNaN(s)&&s>0}function C(s,r){return h(s)&&!isNaN(s)&&s<=r&&s>=0}function J(s,r){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${r}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${b}\`.`}function Q(s,r){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${r}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${b} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var I=D,Z=A;const x=f.forwardRef(({className:s,value:r,...l},t)=>e.jsx(I,{ref:t,className:F("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",s),...l,children:e.jsx(Z,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));x.displayName=I.displayName;const ee=({active:s,payload:r,label:l})=>s&&r&&r.length?e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg border",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:l}),r.map((t,i)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.color}}),e.jsxs("p",{className:"text-sm",children:[t.name,": ",t.value,t.name==="Revenue"?"£":""]})]},i))]}):null;function Ge({stats:s,bookingsByDate:r,popularServices:l,dateRange:t}){const[i,g]=f.useState([new Date(t.start),new Date(t.end)]),v=a=>{g(a),window.location.href=route("admin.reports.bookings",{start_date:N(a[0],"yyyy-MM-dd"),end_date:N(a[1],"yyyy-MM-dd")})},o=r.map(a=>({date:N(new Date(a.date),"MMM dd"),bookings:a.total,revenue:parseFloat(a.revenue)}));return e.jsxs($,{children:[e.jsx(M,{title:"Bookings Report"}),e.jsxs("div",{className:"container mx-auto py-6 space-y-6 px-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Bookings Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Detailed insights and metrics for your booking performance"})]}),e.jsx(L,{date:i,onDateChange:v})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(n,{className:"relative overflow-hidden group hover:shadow-lg transition-all duration-200",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 -mt-8 -mr-8",children:e.jsx("div",{className:"relative w-full h-full",children:e.jsx("div",{className:"absolute inset-0 bg-primary/5 transform rotate-45"})})}),e.jsx(d,{children:e.jsxs(c,{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase tracking-wider",children:"Total Bookings"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold tracking-tight",children:s.total_bookings}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"this week"})]})]})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Daily Avg"}),e.jsx("p",{className:"text-sm font-medium",children:(s.total_bookings/7).toFixed(1)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Target Achievement"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-sm font-medium",children:[(s.total_bookings/15*100).toFixed(),"%"]}),s.total_bookings>=15?e.jsx(p,{variant:"success",className:"bg-green-100 text-green-800",children:"Exceeded"}):e.jsx(p,{variant:"warning",className:"bg-yellow-100 text-yellow-800",children:"In Progress"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress to Target (15)"}),e.jsxs("span",{className:"font-medium",children:[s.total_bookings,"/15"]})]}),e.jsx(x,{value:s.total_bookings/15*100,className:"h-2",indicatorClassName:F(s.total_bookings>=15?"bg-green-500":"bg-primary")})]})]})})]}),e.jsxs(n,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 -mt-8 -mr-8",children:e.jsx("div",{className:"relative w-full h-full",children:e.jsx("div",{className:"absolute inset-0 bg-primary/5 transform rotate-45"})})}),e.jsx(d,{children:e.jsxs(c,{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase tracking-wider",children:"Completed Bookings"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold tracking-tight",children:s.completed_bookings}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["of ",s.total_bookings]})]})]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Completion Rate"}),e.jsxs("span",{className:"font-medium",children:[s.total_bookings>0?(s.completed_bookings/s.total_bookings*100).toFixed():"0","%"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary/30 rounded-full transition-all duration-500",style:{width:`${s.total_bookings>0?s.completed_bookings/s.total_bookings*100:0}%`}})})]})})})]}),e.jsxs(n,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 -mt-8 -mr-8",children:e.jsx("div",{className:"relative w-full h-full",children:e.jsx("div",{className:"absolute inset-0 bg-primary/5 transform rotate-45"})})}),e.jsx(d,{children:e.jsxs(c,{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase tracking-wider",children:"Average Duration"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold tracking-tight",children:typeof s.avg_duration=="number"?s.avg_duration.toFixed(1):typeof s.avg_duration=="string"?parseFloat(s.avg_duration).toFixed(1):"0"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"hours"})]})]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Min Time"}),e.jsx("p",{className:"text-sm font-medium",children:"1.0h"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Max Time"}),e.jsx("p",{className:"text-sm font-medium",children:"8.0h"})]})]})})})]}),e.jsxs(n,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 -mt-8 -mr-8",children:e.jsx("div",{className:"relative w-full h-full",children:e.jsx("div",{className:"absolute inset-0 bg-primary/5 transform rotate-45"})})}),e.jsx(d,{children:e.jsxs(c,{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase tracking-wider",children:"Total Revenue"}),e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-4xl font-bold tracking-tight",children:["£",typeof s.total_revenue=="number"?s.total_revenue.toFixed(2):typeof s.total_revenue=="string"?parseFloat(s.total_revenue).toFixed(2):"0.00"]})})]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Per Booking"}),e.jsxs("p",{className:"text-sm font-medium",children:["£",typeof s.avg_revenue=="number"?s.avg_revenue.toFixed(2):typeof s.avg_revenue=="string"?parseFloat(s.avg_revenue).toFixed(2):"0.00"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"This Week"}),e.jsxs("p",{className:"text-sm font-medium",children:["+",s.total_revenue,"%"]})]})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(n,{className:"relative overflow-hidden",children:[e.jsx(d,{className:"flex flex-row items-center justify-between",children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-primary"}),"Bookings & Revenue Trend"]})}),e.jsx(m,{className:"h-[400px]",children:e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(G,{data:o,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"bookingsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})]}),e.jsx(q,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(V,{dataKey:"date",tick:{fill:"hsl(var(--foreground))"},tickLine:{stroke:"hsl(var(--foreground))"}}),e.jsx(k,{yAxisId:"left",tick:{fill:"hsl(var(--foreground))"},tickLine:{stroke:"hsl(var(--foreground))"}}),e.jsx(k,{yAxisId:"right",orientation:"right",tick:{fill:"hsl(var(--foreground))"},tickLine:{stroke:"hsl(var(--foreground))"}}),e.jsx(U,{content:e.jsx(ee,{})}),e.jsx(_,{yAxisId:"left",type:"monotone",dataKey:"bookings",stroke:"hsl(var(--primary))",fill:"url(#bookingsGradient)",name:"Bookings"}),e.jsx(_,{yAxisId:"right",type:"monotone",dataKey:"revenue",stroke:"#82ca9d",fill:"url(#revenueGradient)",name:"Revenue"})]})})})]}),e.jsxs(n,{children:[e.jsx(d,{className:"flex flex-row items-center justify-between",children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-primary"}),"Popular Services"]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-6",children:l.map(a=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"text-sm font-medium",children:a.service.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.total," bookings"]})]}),e.jsxs(p,{variant:"secondary",className:"font-mono",children:[(a.total/s.total_bookings*100).toFixed(1),"%"]})]}),e.jsx(x,{value:a.total/s.total_bookings*100,className:"h-2"})]},a.service_id))})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(n,{children:[e.jsx(d,{className:"flex flex-row items-center justify-between",children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5 text-primary"}),"Discount Impact"]})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Total Discounts"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["£",typeof s.total_discounts=="number"?s.total_discounts.toFixed(2):typeof s.total_discounts=="string"?parseFloat(s.total_discounts).toFixed(2):"0.00"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Avg Discount/Booking"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["£",s.total_bookings>0?((typeof s.total_discounts=="number"?s.total_discounts:typeof s.total_discounts=="string"?parseFloat(s.total_discounts):0)/s.total_bookings).toFixed(2):"0.00"]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Discount Rate"}),e.jsxs(p,{variant:"outline",className:"font-mono",children:[(()=>{const a=typeof s.total_discounts=="number"?s.total_discounts:typeof s.total_discounts=="string"?parseFloat(s.total_discounts):0,u=(typeof s.total_revenue=="number"?s.total_revenue:typeof s.total_revenue=="string"?parseFloat(s.total_revenue):0)+a;return u>0?(a/u*100).toFixed(1):"0"})(),"%"]})]}),e.jsx(x,{value:(()=>{const a=typeof s.total_discounts=="number"?s.total_discounts:typeof s.total_discounts=="string"?parseFloat(s.total_discounts):0,u=(typeof s.total_revenue=="number"?s.total_revenue:typeof s.total_revenue=="string"?parseFloat(s.total_revenue):0)+a;return u>0?a/u*100:0})(),className:"h-2"})]})]})})]}),e.jsxs(n,{children:[e.jsx(d,{className:"flex flex-row items-center justify-between",children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5 text-primary"}),"Service Utilization"]})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Unique Services"}),e.jsx("span",{className:"text-2xl font-bold",children:s.unique_services})]}),e.jsx(x,{value:s.unique_services/(s.unique_services*1.5)*100,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Avg Bookings per Service"}),e.jsx("span",{className:"text-2xl font-bold",children:(s.total_bookings/s.unique_services).toFixed(1)})]}),e.jsx(x,{value:s.total_bookings/(s.unique_services*s.total_bookings)*100,className:"h-2"})]})]})})]})]})]})]})}export{Ge as default};
