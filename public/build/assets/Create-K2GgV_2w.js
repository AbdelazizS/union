import{r as m,j as e,b as $,$ as R,m as W}from"./app-DN1qyw_4.js";import{u as L}from"./index.esm-BKbCLyPq.js";import{s as Y,o as z,a as x,e as O,n as G,d as H}from"./index-BezgtxjW.js";import{W as J,m as K,S as Q}from"./WebsiteLayout-BMKIC0Sg.js";import{c as p,a as U,B as C}from"./index-LX2bqK-N.js";import{I as h}from"./input-DGoI5Joj.js";import"./label-tZuXtweX.js";import{F as X,a as t,b as o,c as n,d as l,e as i}from"./form-CdwVkoaf.js";import{S,a as k,b as P,c as F,d as T}from"./select-FtBAXfob.js";import{P as Z,a as ee,b as se,C as re}from"./popover-BBU7GkUU.js";import{T as A}from"./textarea-BY2Wfk79.js";import{C as V,a as D}from"./card-B1emr2ze.js";import{C as ae}from"./calendar-CNUueBHR.js";import{T as te}from"./tag-DEHtUp1q.js";import{C as oe}from"./circle-check-lOX_a_VG.js";import{A as ne}from"./arrow-right-fAriJv4s.js";import{f}from"./format-SmSpYad1.js";import"./sheet-mSlUcbMw.js";import"./index-Be8rxKK8.js";import"./index-BMWwzzsh.js";import"./Combination-CFYBKmqt.js";import"./index-BbdZmysQ.js";import"./tslib.es6-BUas5LQb.js";import"./index-D7fmTsiv.js";import"./x-w-3jbt9P.js";import"./createLucideIcon-BpMd3PhH.js";import"./phone-n94bDAZv.js";import"./index-_Y-GkwGe.js";import"./index-BAOtmrvp.js";import"./index-DHYjMWsS.js";import"./index-RM6Jqcin.js";import"./index-DN810jkT.js";import"./index-qC52FuWJ.js";import"./chevron-down-DHOMMINn.js";import"./check-BX_ytt3u.js";import"./chevron-right-DqXEnUok.js";import"./chevron-left-CW_H48r7.js";const le=U("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),q=m.forwardRef(({className:c,variant:u,...d},j)=>e.jsx("div",{ref:j,role:"alert",className:p(le({variant:u}),c),...d}));q.displayName="Alert";const ie=m.forwardRef(({className:c,...u},d)=>e.jsx("h5",{ref:d,className:p("mb-1 font-medium leading-none tracking-tight",c),...u}));ie.displayName="AlertTitle";const I=m.forwardRef(({className:c,...u},d)=>e.jsx("div",{ref:d,className:p("text-sm [&_p]:leading-relaxed",c),...u}));I.displayName="AlertDescription";const ce=z({service_id:x().min(1,"Please select a service"),booking_date:H({required_error:"Please select a date",invalid_type_error:"That's not a valid date"}),duration_hours:G().min(1,"Duration must be at least 1 hour").max(24,"Duration cannot exceed 24 hours"),frequency:O(["one_time","weekly","biweekly","monthly"],{required_error:"Please select a frequency"}),customer_name:x().min(2,"Name must be at least 2 characters").max(100,"Name cannot exceed 100 characters"),customer_email:x().email("Please enter a valid email address"),customer_phone:x().min(10,"Phone number must be at least 10 digits").max(20,"Phone number cannot exceed 20 digits"),customer_address:x().min(5,"Address must be at least 5 characters").max(200,"Address cannot exceed 200 characters"),notes:x().max(500,"Notes cannot exceed 500 characters").optional(),coupon_code:x().max(50,"Coupon code cannot exceed 50 characters").optional()});function Je({service:c,services:u}){var w;const[d,j]=m.useState(null),[de,v]=m.useState(!1),[b,y]=m.useState(null),[_,N]=m.useState(null),r=L({resolver:Y(ce),defaultValues:{service_id:((w=c==null?void 0:c.id)==null?void 0:w.toString())||"",booking_date:new Date,duration_hours:1,frequency:"one_time",customer_name:"",customer_email:"",customer_phone:"",customer_address:"",notes:"",coupon_code:""}}),B=[{value:"one_time",label:"One Time"},{value:"weekly",label:"Weekly"},{value:"biweekly",label:"Bi-weekly"},{value:"monthly",label:"Monthly"}];m.useEffect(()=>{r.watch("service_id")&&r.watch("duration_hours")&&E()},[r.watch("service_id"),r.watch("duration_hours"),r.watch("coupon_code")]);const E=async()=>{var s,a;v(!0),y(null);try{const g=await $.post(route("website.booking.calculate-price"),{service_id:r.getValues("service_id"),duration_hours:r.getValues("duration_hours"),coupon_code:r.getValues("coupon_code"),booking_date:f(r.getValues("booking_date"),"yyyy-MM-dd"),frequency:r.getValues("frequency")});j(g.data)}catch(g){y(((a=(s=g.response)==null?void 0:s.data)==null?void 0:a.message)||"Failed to calculate price")}finally{v(!1)}},M=s=>{W.post(route("website.booking.store"),{...s,booking_date:f(s.booking_date,"yyyy-MM-dd")},{onStart:()=>{N(!0)},onFinish:()=>{N(!1)}})};return e.jsxs(J,{children:[e.jsx(R,{title:"Book Service"}),e.jsx("div",{className:"min-h-screen bg-background py-20",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-extrabold tracking-tight mb-4",children:"Book Your Service"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Fill out the form below to schedule your service appointment"})]}),e.jsx(X,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(M),className:"space-y-8",children:[e.jsx(V,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Q,{className:"h-6 w-6 text-primary"}),e.jsx("h2",{className:"text-2xl font-semibold",children:"Service Details"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx(t,{control:r.control,name:"service_id",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Select Service"}),e.jsxs(S,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(l,{children:e.jsx(k,{children:e.jsx(P,{placeholder:"Choose a service"})})}),e.jsx(F,{children:u.map(a=>e.jsxs(T,{value:a.id.toString(),children:[a.name," - $",Math.max(a.base_price,a.category.hourly_rate),"/hr"]},a.id))})]}),e.jsx(i,{})]})}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsx(t,{control:r.control,name:"duration_hours",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Duration (hours)"}),e.jsx(l,{children:e.jsx(h,{type:"number",min:"1",max:"24",...s,onChange:a=>s.onChange(parseInt(a.target.value))})}),e.jsx(i,{})]})}),e.jsx(t,{control:r.control,name:"frequency",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Frequency"}),e.jsxs(S,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(l,{children:e.jsx(k,{children:e.jsx(P,{placeholder:"Select frequency"})})}),e.jsx(F,{children:B.map(a=>e.jsx(T,{value:a.value,children:a.label},a.value))})]}),e.jsx(i,{})]})})]}),e.jsx(t,{control:r.control,name:"booking_date",render:({field:s})=>e.jsxs(o,{className:"flex flex-col",children:[e.jsx(n,{children:"Preferred Date"}),e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(l,{children:e.jsxs(C,{variant:"outline",className:p("w-full pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?f(s.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(ae,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(se,{className:"w-auto p-0",align:"start",children:e.jsx(re,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:a=>a<new Date,initialFocus:!0})})]}),e.jsx(i,{})]})}),e.jsx(t,{control:r.control,name:"coupon_code",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Coupon Code"}),e.jsx(l,{children:e.jsxs("div",{className:"relative",children:[e.jsx(h,{...s,placeholder:"Enter coupon code"}),e.jsx(te,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"})]})}),e.jsx(i,{})]})}),d&&e.jsxs("div",{className:"bg-primary/5 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Base Price:"}),e.jsxs("span",{children:["$",d.base_amount]})]}),e.jsxs("div",{className:"flex justify-between items-center font-semibold border-t pt-2",children:[e.jsx("span",{children:"Final Price:"}),e.jsxs("span",{children:["$",d.final_amount]})]})]})]})]})})}),e.jsx(V,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(oe,{className:"h-6 w-6 text-primary"}),e.jsx("h2",{className:"text-2xl font-semibold",children:"Your Information"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsx(t,{control:r.control,name:"customer_name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Full Name"}),e.jsx(l,{children:e.jsx(h,{...s})}),e.jsx(i,{})]})}),e.jsx(t,{control:r.control,name:"customer_email",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Email"}),e.jsx(l,{children:e.jsx(h,{...s,type:"email"})}),e.jsx(i,{})]})})]}),e.jsx(t,{control:r.control,name:"customer_phone",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Phone Number"}),e.jsx(l,{children:e.jsx(h,{...s})}),e.jsx(i,{})]})}),e.jsx(t,{control:r.control,name:"customer_address",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Address"}),e.jsx(l,{children:e.jsx(A,{...s,rows:3})}),e.jsx(i,{})]})}),e.jsx(t,{control:r.control,name:"notes",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Additional Notes"}),e.jsx(l,{children:e.jsx(A,{...s,rows:3,placeholder:"Any special requirements or instructions?"})}),e.jsx(i,{})]})})]})]})})}),b&&e.jsx(q,{variant:"destructive",children:e.jsx(I,{children:b})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(C,{type:"submit",size:"lg",disabled:_,className:"rounded-full bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70",children:[_?"Processing...":"Book Now",e.jsx(ne,{className:"ml-2 h-5 w-5"})]})})]})})]})})})]})}export{Je as default};
