import{R as y,r as Ce,j as e,$ as Le,m as me}from"./app-DN1qyw_4.js";import{L as Te,P as Re,H as Ee}from"./AdminLayout-CZ0FKSeN.js";import{C as N,b as P,c as S,a as O}from"./card-B1emr2ze.js";import{T as Be,a as $e,b as pe,c as T,d as Ie,e as R}from"./table-BzJnXkzV.js";import{d as he,B as Fe}from"./index-LX2bqK-N.js";import{t as fe}from"./index-COa0dWTm.js";import{L as Ke}from"./loader-circle-CzJp6IGj.js";import{C as xe}from"./calendar-CNUueBHR.js";import{P as Me}from"./pound-sterling-Bh_ZhSJ7.js";import{c as We}from"./createLucideIcon-BpMd3PhH.js";import{S as ie}from"./star-DHYp30gx.js";import{C as Ve}from"./clock-Dctz3bie.js";import{C as ze}from"./circle-check-lOX_a_VG.js";import{T as Ge,A as Ue,a as ye}from"./AreaChart-jKXRGv4z.js";import{n as He,D as qe,q as Xe,E as Ye,L as ne,b as J,c as Qe,A as Je,d as z,j as Ze,e as ce,k as et,l as tt,o as Ne,u as rt,G as at,p as ve,g as it,X as te,Y as H,f as nt,R as G,C as se,T as U,r as oe,a as le,B as st}from"./generateCategoricalChart-D84JYhbJ.js";import{P as ge,a as je}from"./PieChart-BL1rbe_v.js";import{B as ot,A as lt}from"./BarChart-C1wfmkI8.js";import{P as ct}from"./plus-Bp36QGIZ.js";import{F as dt}from"./file-text-D1ogXrnk.js";import{A as be}from"./arrow-up-right-C_Vbislx.js";import"./input-DGoI5Joj.js";import"./separator-CvwyiO9a.js";import"./sheet-mSlUcbMw.js";import"./index-Be8rxKK8.js";import"./index-BMWwzzsh.js";import"./Combination-CFYBKmqt.js";import"./index-BbdZmysQ.js";import"./tslib.es6-BUas5LQb.js";import"./index-D7fmTsiv.js";import"./x-w-3jbt9P.js";import"./index-DHYjMWsS.js";import"./index-RM6Jqcin.js";import"./index-qC52FuWJ.js";import"./message-square-2aVn-Bt6.js";import"./circle-help-dDNQ1wQ3.js";import"./dropdown-menu-Dup2U6KE.js";import"./index-BAOtmrvp.js";import"./chevron-right-DqXEnUok.js";import"./check-BX_ytt3u.js";import"./user-CNfi-Wmw.js";import"./index-_Y-GkwGe.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Z=We("package",ut);var mt=["type","layout","connectNulls","ref"],pt=["key"];function $(t){"@babel/helpers - typeof";return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},$(t)}function Ae(t,a){if(t==null)return{};var i=ht(t,a),r,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(s=0;s<d.length;s++)r=d[s],!(a.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function ht(t,a){if(t==null)return{};var i={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(a.indexOf(r)>=0)continue;i[r]=t[r]}return i}function q(){return q=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},q.apply(this,arguments)}function we(t,a){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,r)}return i}function g(t){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?we(Object(i),!0).forEach(function(r){A(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):we(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function E(t){return vt(t)||yt(t)||xt(t)||ft()}function ft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xt(t,a){if(t){if(typeof t=="string")return de(t,a);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return de(t,a)}}function yt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vt(t){if(Array.isArray(t))return de(t)}function de(t,a){(a==null||a>t.length)&&(a=t.length);for(var i=0,r=new Array(a);i<a;i++)r[i]=t[i];return r}function gt(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function ke(t,a){for(var i=0;i<a.length;i++){var r=a[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Se(r.key),r)}}function jt(t,a,i){return a&&ke(t.prototype,a),i&&ke(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function bt(t,a,i){return a=re(a),At(t,Pe()?Reflect.construct(a,i||[],re(t).constructor):a.apply(t,i))}function At(t,a){if(a&&($(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wt(t)}function wt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pe=function(){return!!t})()}function re(t){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},re(t)}function kt(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),a&&ue(t,a)}function ue(t,a){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},ue(t,a)}function A(t,a,i){return a=Se(a),a in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i,t}function Se(t){var a=Ct(t,"string");return $(a)=="symbol"?a:a+""}function Ct(t,a){if($(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,a);if($(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var X=function(t){function a(){var i;gt(this,a);for(var r=arguments.length,s=new Array(r),d=0;d<r;d++)s[d]=arguments[d];return i=bt(this,a,[].concat(s)),A(i,"state",{isAnimationFinished:!0,totalLength:0}),A(i,"generateSimpleStrokeDasharray",function(o,c){return"".concat(c,"px ").concat(o-c,"px")}),A(i,"getStrokeDasharray",function(o,c,p){var n=p.reduce(function(w,C){return w+C});if(!n)return i.generateSimpleStrokeDasharray(c,o);for(var l=Math.floor(o/n),m=o%n,u=c-o,f=[],h=0,x=0;h<p.length;x+=p[h],++h)if(x+p[h]>m){f=[].concat(E(p.slice(0,h)),[m-x]);break}var b=f.length%2===0?[0,u]:[u];return[].concat(E(a.repeat(p,l)),E(f),b).map(function(w){return"".concat(w,"px")}).join(", ")}),A(i,"id",rt("recharts-line-")),A(i,"pathRef",function(o){i.mainCurve=o}),A(i,"handleAnimationEnd",function(){i.setState({isAnimationFinished:!0}),i.props.onAnimationEnd&&i.props.onAnimationEnd()}),A(i,"handleAnimationStart",function(){i.setState({isAnimationFinished:!1}),i.props.onAnimationStart&&i.props.onAnimationStart()}),i}return kt(a,t),jt(a,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var d=this.props,o=d.points,c=d.xAxis,p=d.yAxis,n=d.layout,l=d.children,m=Xe(l,Ye);if(!m)return null;var u=function(x,b){return{x:x.x,y:x.y,value:x.value,errorVal:Ne(x.payload,b)}},f={clipPath:r?"url(#clipPath-".concat(s,")"):null};return y.createElement(ne,f,m.map(function(h){return y.cloneElement(h,{key:"bar-".concat(h.props.dataKey),data:o,xAxis:c,yAxis:p,layout:n,dataPointFormatter:u})}))}},{key:"renderDots",value:function(r,s,d){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var c=this.props,p=c.dot,n=c.points,l=c.dataKey,m=J(this.props,!1),u=J(p,!0),f=n.map(function(x,b){var w=g(g(g({key:"dot-".concat(b),r:3},m),u),{},{index:b,cx:x.x,cy:x.y,value:x.value,dataKey:l,payload:x.payload,points:n});return a.renderDotItem(p,w)}),h={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(d,")"):null};return y.createElement(ne,q({className:"recharts-line-dots",key:"dots"},h),f)}},{key:"renderCurveStatically",value:function(r,s,d,o){var c=this.props,p=c.type,n=c.layout,l=c.connectNulls;c.ref;var m=Ae(c,mt),u=g(g(g({},J(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(d,")"):null,points:r},o),{},{type:p,layout:n,connectNulls:l});return y.createElement(Qe,q({},u,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,s){var d=this,o=this.props,c=o.points,p=o.strokeDasharray,n=o.isAnimationActive,l=o.animationBegin,m=o.animationDuration,u=o.animationEasing,f=o.animationId,h=o.animateNewValues,x=o.width,b=o.height,w=this.state,C=w.prevPoints,I=w.totalLength;return y.createElement(Je,{begin:l,duration:m,isActive:n,easing:u,from:{t:0},to:{t:1},key:"line-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var k=_.t;if(C){var F=C.length/c.length,D=c.map(function(v,ae){var W=Math.floor(ae*F);if(C[W]){var V=C[W],L=z(V.x,v.x),Oe=z(V.y,v.y);return g(g({},v),{},{x:L(k),y:Oe(k)})}if(h){var De=z(x*2,v.x),_e=z(b/2,v.y);return g(g({},v),{},{x:De(k),y:_e(k)})}return g(g({},v),{},{x:v.x,y:v.y})});return d.renderCurveStatically(D,r,s)}var Y=z(0,I),K=Y(k),M;if(p){var Q="".concat(p).split(/[,\s]+/gim).map(function(v){return parseFloat(v)});M=d.getStrokeDasharray(K,I,Q)}else M=d.generateSimpleStrokeDasharray(I,K);return d.renderCurveStatically(c,r,s,{strokeDasharray:M})})}},{key:"renderCurve",value:function(r,s){var d=this.props,o=d.points,c=d.isAnimationActive,p=this.state,n=p.prevPoints,l=p.totalLength;return c&&o&&o.length&&(!n&&l>0||!Ze(n,o))?this.renderCurveWithAnimation(r,s):this.renderCurveStatically(o,r,s)}},{key:"render",value:function(){var r,s=this.props,d=s.hide,o=s.dot,c=s.points,p=s.className,n=s.xAxis,l=s.yAxis,m=s.top,u=s.left,f=s.width,h=s.height,x=s.isAnimationActive,b=s.id;if(d||!c||!c.length)return null;var w=this.state.isAnimationFinished,C=c.length===1,I=he("recharts-line",p),_=n&&n.allowDataOverflow,k=l&&l.allowDataOverflow,F=_||k,D=ce(b)?this.id:b,Y=(r=J(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},K=Y.r,M=K===void 0?3:K,Q=Y.strokeWidth,v=Q===void 0?2:Q,ae=et(o)?o:{},W=ae.clipDot,V=W===void 0?!0:W,L=M*2+v;return y.createElement(ne,{className:I},_||k?y.createElement("defs",null,y.createElement("clipPath",{id:"clipPath-".concat(D)},y.createElement("rect",{x:_?u:u-f/2,y:k?m:m-h/2,width:_?f:f*2,height:k?h:h*2})),!V&&y.createElement("clipPath",{id:"clipPath-dots-".concat(D)},y.createElement("rect",{x:u-L/2,y:m-L/2,width:f+L,height:h+L}))):null,!C&&this.renderCurve(F,D),this.renderErrorBar(F,D),(C||o)&&this.renderDots(F,V,D),(!x||w)&&tt.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,s){for(var d=r.length%2!==0?[].concat(E(r),[0]):r,o=[],c=0;c<s;++c)o=[].concat(E(o),E(d));return o}},{key:"renderDotItem",value:function(r,s){var d;if(y.isValidElement(r))d=y.cloneElement(r,s);else if(He(r))d=r(s);else{var o=s.key,c=Ae(s,pt),p=he("recharts-line-dot",typeof r!="boolean"?r.className:"");d=y.createElement(qe,q({key:o},c,{className:p}))}return d}}])}(Ce.PureComponent);A(X,"displayName","Line");A(X,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!at.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});A(X,"getComposedData",function(t){var a=t.props,i=t.xAxis,r=t.yAxis,s=t.xAxisTicks,d=t.yAxisTicks,o=t.dataKey,c=t.bandSize,p=t.displayedData,n=t.offset,l=a.layout,m=p.map(function(u,f){var h=Ne(u,o);return l==="horizontal"?{x:ve({axis:i,ticks:s,bandSize:c,entry:u,index:f}),y:ce(h)?null:r.scale(h),value:h,payload:u}:{x:ce(h)?null:i.scale(h),y:ve({axis:r,ticks:d,bandSize:c,entry:u,index:f}),value:h,payload:u}});return g({points:m,layout:l},n)});var Nt=it({chartName:"LineChart",GraphicalChild:X,axisComponents:[{axisType:"xAxis",AxisComp:te},{axisType:"yAxis",AxisComp:H}],formatAxisMap:nt});const j={primary:"#2563eb",secondary:"#7c3aed",success:"#059669",warning:"#d97706",danger:"#dc2626"},B=[j.primary,j.secondary,j.success,j.warning,j.danger],ee=({active:t,payload:a,label:i})=>t&&a&&a.length?e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:i}),a.map((r,s)=>e.jsxs("p",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r.color}}),e.jsxs("span",{className:"text-muted-foreground",children:[r.name,":"]}),e.jsxs("span",{className:"font-medium",children:[r.name.toLowerCase().includes("revenue")?"£":"",typeof r.value=="number"?r.value.toLocaleString():r.value]})]},s))]}):null;function hr({stats:t={},charts:a={weeklyRevenue:[],statusDistribution:{},categoryDistribution:[],popularServices:[],satisfactionTrend:[]},recentBookings:i=[]}){const[r,s]=Ce.useState(!1),d=async()=>{try{s(!0),await me.reload({only:["stats","charts","recentBookings"]}),fe.success("Dashboard data refreshed")}catch{fe.error("Failed to refresh data")}finally{s(!1)}},o=({title:n,value:l,icon:m,growth:u,subtitle:f})=>e.jsxs(N,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:n}),e.jsx(m,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(O,{children:[e.jsx("div",{className:"text-2xl font-bold",children:typeof l=="number"&&n.toLowerCase().includes("revenue")?`£${l.toLocaleString()}`:l}),u!==void 0&&e.jsx("p",{className:"text-xs text-muted-foreground flex items-center",children:u==="new"?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"h-4 w-4 text-green-500 mr-1"}),"New today"]}):e.jsxs(e.Fragment,{children:[Number(u)>=0?e.jsx(be,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(lt,{className:"h-4 w-4 text-red-500 mr-1"}),Math.abs(Number(u)).toFixed(1),"% vs yesterday"]})}),f&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:f})]})]}),c=({title:n,description:l,icon:m,href:u,color:f="primary"})=>e.jsxs(N,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>me.visit(u),children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:n}),e.jsx(m,{className:`h-4 w-4 text-${f}`})]}),e.jsx(O,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:l})})]}),p=({status:n})=>{const l={pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l[n]||"bg-gray-100 text-gray-800"}`,children:n.charAt(0).toUpperCase()+n.slice(1)})};return e.jsxs(Te,{children:[e.jsx(Le,{title:"Admin Dashboard"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold leading-tight text-gray-800",children:"Dashboard Overview"}),e.jsxs(Fe,{onClick:d,variant:"outline",size:"sm",disabled:r,children:[r&&e.jsx(Ke,{className:"h-4 w-4 animate-spin mr-2"}),"Refresh"]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(o,{title:"Total Bookings",value:t.totalBookings??0,icon:xe,growth:t.bookingsGrowth,subtitle:t.bookingTimeContext}),e.jsx(o,{title:"Today's Revenue",value:t.todayRevenue??0,icon:Me,growth:t.revenueGrowth,subtitle:"vs yesterday"}),e.jsx(o,{title:"Active Services",value:t.activeServices??0,icon:Z,subtitle:`${t.totalCategories??0} categories`}),e.jsx(o,{title:"Customer Rating",value:`${t.averageRating??0}/5`,icon:ie,subtitle:`${t.totalReviews??0} reviews`})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(o,{title:"Today's Bookings",value:t.todayBookings??0,icon:Ve,subtitle:`${t.pendingToday??0} pending`}),e.jsx(o,{title:"Active Coupons",value:t.activeCoupons??0,icon:Re,subtitle:`${t.couponUsage??0}% usage rate`}),e.jsx(o,{title:"Partners",value:t.activePartners??0,icon:Ee,subtitle:"Active partnerships"}),e.jsx(o,{title:"Completion Rate",value:`${t.completionRate??0}%`,icon:ze,growth:t.completionRateGrowth})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{children:[e.jsx(P,{children:e.jsxs(S,{className:"flex items-center gap-2 text-base",children:[e.jsx(Ge,{className:"h-5 w-5 text-primary"}),"Weekly Revenue & Bookings"]})}),e.jsx(O,{className:"h-[300px]",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(Ue,{data:a.weeklyRevenue??[],children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:j.primary,stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:j.primary,stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorBookings",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:j.secondary,stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:j.secondary,stopOpacity:0})]})]}),e.jsx(te,{dataKey:"date"}),e.jsx(H,{yAxisId:"left"}),e.jsx(H,{yAxisId:"right",orientation:"right"}),e.jsx(se,{strokeDasharray:"3 3"}),e.jsx(U,{content:e.jsx(ee,{})}),e.jsx(oe,{}),e.jsx(ye,{type:"monotone",dataKey:"revenue",stroke:j.primary,fillOpacity:1,fill:"url(#colorRevenue)",yAxisId:"left",name:"Revenue"}),e.jsx(ye,{type:"monotone",dataKey:"bookings",stroke:j.secondary,fillOpacity:1,fill:"url(#colorBookings)",yAxisId:"right",name:"Bookings"})]})})})]}),e.jsxs(N,{children:[e.jsx(P,{children:e.jsxs(S,{className:"flex items-center gap-2 text-base",children:[e.jsx(Z,{className:"h-5 w-5 text-primary"}),"Booking Status Distribution"]})}),e.jsx(O,{className:"h-[300px]",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(ge,{children:[e.jsx(je,{data:Object.entries(a.statusDistribution??{}).map(([n,l])=>({name:n.charAt(0).toUpperCase()+n.slice(1),value:l})),cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",label:({name:n,percent:l})=>`${n} (${(l*100).toFixed(0)}%)`,children:Object.entries(a.statusDistribution??{}).map((n,l)=>e.jsx(le,{fill:B[l%B.length]},`cell-${l}`))}),e.jsx(U,{content:e.jsx(ee,{})}),e.jsx(oe,{})]})})})]}),e.jsxs(N,{children:[e.jsx(P,{children:e.jsxs(S,{className:"flex items-center gap-2 text-base",children:[e.jsx(Z,{className:"h-5 w-5 text-primary"}),"Service Categories"]})}),e.jsx(O,{className:"h-[300px]",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(ge,{children:[e.jsx(je,{data:(a.categoryDistribution??[]).map(n=>({...n,value:n.value||.1})),cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:2,dataKey:"value",nameKey:"name",label:({name:n,value:l,percent:m})=>{const u=l===.1?0:(m*100).toFixed(0);return`${n} (${u}%)`},labelLine:{stroke:"hsl(var(--muted-foreground))",strokeWidth:.5},children:(a.categoryDistribution??[]).map((n,l)=>e.jsx(le,{fill:B[l%B.length],fillOpacity:n.value===0?.5:1},`cell-${l}`))}),e.jsx(U,{content:({active:n,payload:l})=>{if(n&&l&&l.length){const m=l[0].payload;return e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border",children:[e.jsx("p",{className:"text-sm font-medium",children:m.name}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Services: ",m.originalValue||0]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Percentage: ",m.value===.1?"0":(l[0].percent*100).toFixed(0),"%"]})]})}return null}}),e.jsx(oe,{formatter:(n,l)=>{const{payload:m}=l,u=m.value===.1?0:(m.percent*100).toFixed(0);return`${n} (${u}%)`}})]})})})]}),e.jsxs(N,{children:[e.jsx(P,{children:e.jsxs(S,{className:"flex items-center gap-2 text-base",children:[e.jsx(ie,{className:"h-5 w-5 text-primary"}),"Popular Services"]})}),e.jsx(O,{className:"h-[300px]",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(ot,{data:(a.popularServices??[]).sort((n,l)=>l.bookings-n.bookings).slice(0,5),margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(se,{strokeDasharray:"3 3"}),e.jsx(te,{dataKey:"name",interval:0,tick:{angle:-45,textAnchor:"end",fontSize:12,fill:"hsl(var(--muted-foreground))"}}),e.jsx(H,{}),e.jsx(U,{content:e.jsx(ee,{})}),e.jsx(st,{dataKey:"bookings",name:"Bookings",radius:[4,4,0,0],children:(a.popularServices??[]).sort((n,l)=>l.bookings-n.bookings).slice(0,5).map((n,l)=>e.jsx(le,{fill:B[l%B.length]},`cell-${l}`))})]})})})]}),e.jsxs(N,{className:"md:col-span-2",children:[e.jsx(P,{children:e.jsxs(S,{className:"flex items-center gap-2 text-base",children:[e.jsx(ie,{className:"h-5 w-5 text-primary"}),"Customer Satisfaction Trend"]})}),e.jsx(O,{className:"h-[300px]",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(Nt,{data:a.satisfactionTrend??[],children:[e.jsx(se,{strokeDasharray:"3 3"}),e.jsx(te,{dataKey:"date"}),e.jsx(H,{domain:[0,5]}),e.jsx(U,{content:e.jsx(ee,{})}),e.jsx(X,{type:"monotone",dataKey:"rating",stroke:j.primary,strokeWidth:2,dot:{r:4},name:"Rating"})]})})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(c,{title:"New Booking",description:"Create a new service booking",icon:ct,href:route("admin.bookings.create"),color:"primary"}),e.jsx(c,{title:"Manage Categories",description:"View and manage service categories",icon:Z,href:route("admin.service-categories.index"),color:"primary"}),e.jsx(c,{title:"Manage Services",description:"View and manage all services",icon:dt,href:route("admin.services.index"),color:"primary"}),e.jsx(c,{title:"Manage Bookings",description:"View all bookings",icon:xe,href:route("admin.bookings.index"),color:"primary"})]}),e.jsxs(N,{children:[e.jsx(P,{children:e.jsx(S,{className:"text-base",children:"Recent Bookings"})}),e.jsx(O,{children:e.jsxs(Be,{children:[e.jsx($e,{children:e.jsxs(pe,{children:[e.jsx(T,{children:"ID"}),e.jsx(T,{children:"Customer"}),e.jsx(T,{children:"Service"}),e.jsx(T,{children:"Amount"}),e.jsx(T,{children:"Status"}),e.jsx(T,{children:"Date"})]})}),e.jsx(Ie,{children:(i??[]).map(n=>e.jsxs(pe,{children:[e.jsxs(R,{children:["#",n.id]}),e.jsx(R,{children:n.customer_name}),e.jsx(R,{children:n.service.name}),e.jsxs(R,{children:["£",n.final_amount]}),e.jsx(R,{children:e.jsx(p,{status:n.status})}),e.jsx(R,{children:n.created_at})]},n.id))})]})})]})]})]})]})}export{hr as default};
