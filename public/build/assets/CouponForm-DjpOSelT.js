import{j as e}from"./app-DN1qyw_4.js";import{F,a as n,b as r,c as l,d as o,f as c,e as i}from"./form-CdwVkoaf.js";import{S,a as f,b as P,c as V,d as j}from"./select-FtBAXfob.js";import{I as m}from"./input-DGoI5Joj.js";import{B as x,c as p}from"./index-LX2bqK-N.js";import{S as D}from"./switch-D54_V_9Y.js";import{P as g,a as v,b,C as N}from"./popover-BBU7GkUU.js";import{f as E}from"./dialog-CY5EnKOC.js";import{C}from"./calendar-CNUueBHR.js";import{f as w}from"./format-SmSpYad1.js";import"./index.esm-BKbCLyPq.js";import"./label-tZuXtweX.js";import"./index-BbdZmysQ.js";import"./index-BMWwzzsh.js";import"./index-BAOtmrvp.js";import"./Combination-CFYBKmqt.js";import"./tslib.es6-BUas5LQb.js";import"./index-DHYjMWsS.js";import"./index-RM6Jqcin.js";import"./index-DN810jkT.js";import"./index-qC52FuWJ.js";import"./chevron-down-DHOMMINn.js";import"./createLucideIcon-BpMd3PhH.js";import"./check-BX_ytt3u.js";import"./chevron-right-DqXEnUok.js";import"./chevron-left-CW_H48r7.js";import"./index-D7fmTsiv.js";import"./index-Be8rxKK8.js";import"./x-w-3jbt9P.js";function le({form:s,onSubmit:y,isSubmitting:h}){return e.jsx(F,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(y),className:"space-y-6 w-full max-w-3xl mx-auto",children:[e.jsx(n,{control:s.control,name:"code",render:({field:a})=>e.jsxs(r,{children:[e.jsx(l,{className:"text-base",children:"Code"}),e.jsx(o,{children:e.jsx(m,{placeholder:"SUMMER2024",className:"h-10",...a})}),e.jsx(c,{children:"The code customers will enter to apply the discount"}),e.jsx(i,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx(n,{control:s.control,name:"type",render:({field:a})=>e.jsxs(r,{children:[e.jsx(l,{className:"text-base",children:"Type"}),e.jsxs(S,{onValueChange:t=>{a.onChange(t),s.setValue("discount_value",null)},defaultValue:a.value,children:[e.jsx(o,{children:e.jsx(f,{className:"h-10",children:e.jsx(P,{placeholder:"Select discount type"})})}),e.jsxs(V,{children:[e.jsx(j,{value:"percentage",children:"Percentage"}),e.jsx(j,{value:"fixed",children:"Fixed Amount"})]})]}),e.jsx(c,{children:"Choose between percentage or fixed amount"}),e.jsx(i,{})]})}),e.jsx(n,{control:s.control,name:"discount_value",render:({field:a})=>e.jsxs(r,{children:[e.jsx(l,{className:"text-base",children:"Discount Value"}),e.jsx(o,{children:e.jsx(m,{type:"number",className:"h-10",placeholder:s.watch("type")==="percentage"?"Enter 0-100":"Enter amount",value:a.value??"",onChange:t=>{const u=t.target.value;if(u==="")a.onChange(null);else{const d=Number(u);isNaN(d)||(s.watch("type")==="percentage"?a.onChange(Math.min(Math.max(d,0),100)):a.onChange(Math.max(d,0)))}}})}),e.jsx(c,{children:s.watch("type")==="percentage"?"Enter percentage between 0-100":"Enter fixed discount amount"}),e.jsx(i,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx(n,{control:s.control,name:"usage_limit",render:({field:a})=>e.jsxs(r,{children:[e.jsx(l,{className:"text-base",children:"Usage Limit"}),e.jsx(o,{children:e.jsx(m,{type:"number",className:"h-10",placeholder:"100",...a,onChange:t=>a.onChange(t.target.value?Number(t.target.value):null)})}),e.jsx(c,{children:"Max number of uses"}),e.jsx(i,{})]})}),e.jsx(n,{control:s.control,name:"valid_from",render:({field:a})=>e.jsxs(r,{children:[e.jsx(l,{className:"text-base",children:"Valid From"}),e.jsxs(g,{children:[e.jsx(v,{asChild:!0,children:e.jsx(o,{children:e.jsxs(x,{variant:"outline",className:p("w-full h-10 px-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?w(a.value,"PP"):e.jsx("span",{children:"Pick a date"}),e.jsx(C,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(b,{className:"w-auto p-0",align:"start",children:e.jsx(N,{mode:"single",selected:a.value,onSelect:a.onChange,disabled:t=>t<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]}),e.jsx(i,{})]})})]}),e.jsx(n,{control:s.control,name:"valid_until",render:({field:a})=>e.jsxs(r,{children:[e.jsx(l,{className:"text-base",children:"Valid Until"}),e.jsxs(g,{children:[e.jsx(v,{asChild:!0,children:e.jsx(o,{children:e.jsxs(x,{variant:"outline",className:p("w-full h-10 px-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?w(a.value,"PP"):e.jsx("span",{children:"Pick a date"}),e.jsx(C,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(b,{className:"w-auto p-0",align:"start",children:e.jsx(N,{mode:"single",selected:a.value,onSelect:a.onChange,disabled:t=>t<new Date(s.watch("valid_from")||new Date().setHours(0,0,0,0)),initialFocus:!0})})]}),e.jsx(c,{children:"Leave empty for no expiration date"}),e.jsx(i,{})]})}),e.jsx(n,{control:s.control,name:"is_active",render:({field:a})=>e.jsxs(r,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{className:"text-base",children:"Active"}),e.jsx(c,{children:"Enable or disable this coupon"})]}),e.jsx(o,{children:e.jsx(D,{checked:a.value,onCheckedChange:a.onChange})})]})}),e.jsx(E,{children:e.jsx(x,{type:"submit",disabled:h,className:"w-full",children:h?"Saving...":"Save"})})]})})}export{le as CouponForm};
