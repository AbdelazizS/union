import{r as k,j as e,$ as C}from"./app-D5zgOKAD.js";import{L as D,P as x}from"./AdminLayout-BQ9sENZH.js";import{C as r,b as l,c as i,a}from"./card-BKGLJ8p-.js";import"./index-C8-8ZKTM.js";import"./popover-CYbGzW0S.js";import{c as u}from"./createLucideIcon-AWgR876W.js";import{T as q,A,a as b}from"./AreaChart-DdVTCY11.js";import{R as g,m as M,X as R,Y as $,T as N,o as G}from"./generateCategoricalChart-nqkF7l5G.js";import{P as T,a as O}from"./PieChart-OGSSNER4.js";import{f as h}from"./format-SmSpYad1.js";import"./input-D5FKwQjB.js";import"./separator-ZBq7OQqG.js";import"./sheet-CpllKNoK.js";import"./index-B6dbISNz.js";import"./index-BSVezLny.js";import"./Combination-Cmb1a147.js";import"./index-BBAzO_4d.js";import"./tslib.es6-CmEaCU22.js";import"./index-Cuq-Mmvq.js";import"./x-DkObbUL-.js";import"./index-BB6OtDRK.js";import"./index-DNxp1Wi1.js";import"./index-CrEWOBzh.js";import"./layers-ai9ES5Yn.js";import"./calendar-CP_I-VWs.js";import"./circle-help-DHWhEvao.js";import"./file-text-CyaKJaEx.js";import"./index-CDOhrpKr.js";import"./dropdown-menu-CixTnASt.js";import"./index-Crc4BVh8.js";import"./chevron-right-DKEmXFr0.js";import"./check-BhB20Pym.js";import"./user-Ch48qi0I.js";import"./chevron-left-AmoEll6X.js";import"./index-D8untdAM.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],S=u("arrow-down",P);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],K=u("arrow-up",B);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],E=u("credit-card",L);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],I=u("settings-2",H),n={primary:"#2563eb",secondary:"#7c3aed",success:"#059669"},U=[n.primary,n.secondary,n.success];function Ae({stats:t,revenueByDay:v,discountBreakdown:W,dateRange:f}){var y,j;const[_,X]=k.useState([new Date(f.start),new Date(f.end)]),c=v.map(o=>({date:h(new Date(o.date),"MMM dd"),revenue:parseFloat(o.revenue),discounts:parseFloat(o.discounts)})),d=((o,s)=>s?(o-s)/s*100:0)((y=c[c.length-1])==null?void 0:y.revenue,(j=c[c.length-2])==null?void 0:j.revenue),F=({active:o,payload:s,label:m})=>o&&s&&s.length?e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg border border-gray-200",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:m}),s.map((p,w)=>e.jsxs("p",{style:{color:p.color},className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",children:[p.name,":"]}),e.jsxs("span",{children:["£",p.value.toFixed(2)]})]},w))]}):null;return e.jsxs(D,{children:[e.jsx(C,{title:"Financial Report"}),e.jsxs("div",{className:"container mx-auto py-6 space-y-6 px-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Financial Report"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Analytics for ",h(_[0],"MMM dd, yyyy")," - ",h(_[1],"MMM dd, yyyy")]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(r,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-500"}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-blue-500"}),e.jsx(i,{children:"Total Revenue"})]})}),e.jsxs(a,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-3xl font-bold",children:["£",typeof t.total_revenue=="number"?t.total_revenue.toFixed(2):typeof t.total_revenue=="string"?parseFloat(t.total_revenue).toFixed(2):"0.00"]}),d!==0&&e.jsxs("span",{className:`flex items-center text-sm ${d>0?"text-green-500":"text-red-500"}`,children:[d>0?e.jsx(K,{className:"w-4 h-4"}):e.jsx(S,{className:"w-4 h-4"}),Math.abs(d).toFixed(1),"%"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Before discounts: £",typeof t.total_base_amount=="number"?t.total_base_amount.toFixed(2):typeof t.total_base_amount=="string"?parseFloat(t.total_base_amount).toFixed(2):"0.00"]})]})]}),e.jsxs(r,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-purple-500"}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-purple-500"}),e.jsx(i,{children:"Total Discounts"})]})}),e.jsxs(a,{children:[e.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["£",typeof t.total_discounts=="number"?t.total_discounts.toFixed(2):typeof t.total_discounts=="string"?parseFloat(t.total_discounts).toFixed(2):"0.00"]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[(()=>{const o=typeof t.total_discounts=="number"?t.total_discounts:typeof t.total_discounts=="string"?parseFloat(t.total_discounts):0,s=typeof t.total_base_amount=="number"?t.total_base_amount:typeof t.total_base_amount=="string"?parseFloat(t.total_base_amount):0;return s>0?(o/s*100).toFixed(1):"0"})(),"% of base amount"]})]})]}),e.jsxs(r,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-green-500"}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-green-500"}),e.jsx(i,{children:"Special Adjustments"})]})}),e.jsx(a,{children:e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["£",typeof t.total_adjustments=="number"?t.total_adjustments.toFixed(2):typeof t.total_adjustments=="string"?parseFloat(t.total_adjustments).toFixed(2):"0.00"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(r,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(l,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-blue-500"}),e.jsx(i,{children:"Revenue Analytics"})]})})}),e.jsx(a,{className:"h-[400px]",children:e.jsx(g,{width:"100%",height:"100%",children:e.jsxs(A,{data:c,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:n.primary,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:n.primary,stopOpacity:0})]}),e.jsxs("linearGradient",{id:"discountGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:n.secondary,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:n.secondary,stopOpacity:0})]})]}),e.jsx(M,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(R,{dataKey:"date",stroke:"#6b7280",tick:{fill:"#6b7280"}}),e.jsx($,{stroke:"#6b7280",tick:{fill:"#6b7280"},tickFormatter:o=>`£${o}`}),e.jsx(N,{content:e.jsx(F,{})}),e.jsx(b,{type:"monotone",dataKey:"revenue",stroke:n.primary,fill:"url(#revenueGradient)",name:"Revenue",strokeWidth:2}),e.jsx(b,{type:"monotone",dataKey:"discounts",stroke:n.secondary,fill:"url(#discountGradient)",name:"Discounts",strokeWidth:2})]})})})]}),e.jsxs(r,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-purple-500"}),e.jsx(i,{children:"Discount Breakdown"})]})}),e.jsx(a,{className:"h-[400px]",children:e.jsx(g,{width:"100%",height:"100%",children:e.jsxs(T,{children:[e.jsx(O,{data:[{name:"Frequency Discounts",value:typeof t.total_frequency_discounts=="number"?t.total_frequency_discounts:typeof t.total_frequency_discounts=="string"?parseFloat(t.total_frequency_discounts||0):0},{name:"Bulk Discounts",value:typeof t.total_bulk_discounts=="number"?t.total_bulk_discounts:typeof t.total_bulk_discounts=="string"?parseFloat(t.total_bulk_discounts||0):0},{name:"Coupon Discounts",value:typeof t.total_coupon_discounts=="number"?t.total_coupon_discounts:typeof t.total_coupon_discounts=="string"?parseFloat(t.total_coupon_discounts||0):0}].filter(o=>o.value>0),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,label:({name:o,value:s,percent:m})=>`${o} (${(m*100).toFixed(1)}%)`,children:U.map((o,s)=>e.jsx(G,{fill:o},`cell-${s}`))}),e.jsx(N,{formatter:o=>`£${parseFloat(o).toFixed(2)}`,contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.5rem 1rem"}})]})})})]})]}),e.jsxs(r,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-purple-500"}),e.jsx(i,{children:"Discount Analysis"})]})}),e.jsx(a,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-500"}),"Frequency Discounts"]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["£",typeof t.total_frequency_discounts=="number"?t.total_frequency_discounts.toFixed(2):typeof t.total_frequency_discounts=="string"?parseFloat(t.total_frequency_discounts).toFixed(2):"0.00"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(()=>{const o=typeof t.total_frequency_discounts=="number"?t.total_frequency_discounts:typeof t.total_frequency_discounts=="string"?parseFloat(t.total_frequency_discounts):0,s=typeof t.total_discounts=="number"?t.total_discounts:typeof t.total_discounts=="string"?parseFloat(t.total_discounts):0;return s>0?(o/s*100).toFixed(1):"0"})(),"% of total discounts"]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-purple-500"}),"Bulk Discounts"]}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["£",typeof t.total_bulk_discounts=="number"?t.total_bulk_discounts.toFixed(2):typeof t.total_bulk_discounts=="string"?parseFloat(t.total_bulk_discounts).toFixed(2):"0.00"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(()=>{const o=typeof t.total_bulk_discounts=="number"?t.total_bulk_discounts:typeof t.total_bulk_discounts=="string"?parseFloat(t.total_bulk_discounts):0,s=typeof t.total_discounts=="number"?t.total_discounts:typeof t.total_discounts=="string"?parseFloat(t.total_discounts):0;return s>0?(o/s*100).toFixed(1):"0"})(),"% of total discounts"]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),"Coupon Discounts"]}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["£",typeof t.total_coupon_discounts=="number"?t.total_coupon_discounts.toFixed(2):typeof t.total_coupon_discounts=="string"?parseFloat(t.total_coupon_discounts).toFixed(2):"0.00"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(()=>{const o=typeof t.total_coupon_discounts=="number"?t.total_coupon_discounts:typeof t.total_coupon_discounts=="string"?parseFloat(t.total_coupon_discounts):0,s=typeof t.total_discounts=="number"?t.total_discounts:typeof t.total_discounts=="string"?parseFloat(t.total_discounts):0;return s>0?(o/s*100).toFixed(1):"0"})(),"% of total discounts"]})]})]})})]})]})]})}export{Ae as default};
