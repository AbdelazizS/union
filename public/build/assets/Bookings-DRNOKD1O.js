import{r as g,j as e,$ as v}from"./app-D5zgOKAD.js";import{L as N}from"./AdminLayout-BQ9sENZH.js";import{C as i,b as l,c as r,a as o}from"./card-BKGLJ8p-.js";import{c as y}from"./index-C8-8ZKTM.js";import"./popover-CYbGzW0S.js";import{B as m}from"./badge-DAUpYQro.js";import{P as d}from"./progress-BZD9y5Tx.js";import{T as b,A as k,a as u}from"./AreaChart-DdVTCY11.js";import{R as _,m as w,X as F,Y as h,T as C}from"./generateCategoricalChart-nqkF7l5G.js";import{L as T}from"./layers-ai9ES5Yn.js";import{T as A}from"./tag-DL5krDDT.js";import{C as D}from"./chart-column-BVfp5vEJ.js";import{f as R}from"./format-SmSpYad1.js";import"./input-D5FKwQjB.js";import"./separator-ZBq7OQqG.js";import"./sheet-CpllKNoK.js";import"./index-B6dbISNz.js";import"./index-BSVezLny.js";import"./Combination-Cmb1a147.js";import"./index-BBAzO_4d.js";import"./tslib.es6-CmEaCU22.js";import"./index-Cuq-Mmvq.js";import"./x-DkObbUL-.js";import"./createLucideIcon-AWgR876W.js";import"./index-BB6OtDRK.js";import"./index-DNxp1Wi1.js";import"./index-CrEWOBzh.js";import"./calendar-CP_I-VWs.js";import"./circle-help-DHWhEvao.js";import"./file-text-CyaKJaEx.js";import"./index-CDOhrpKr.js";import"./dropdown-menu-CixTnASt.js";import"./index-Crc4BVh8.js";import"./chevron-right-DKEmXFr0.js";import"./check-BhB20Pym.js";import"./user-Ch48qi0I.js";import"./chevron-left-AmoEll6X.js";import"./index-D8untdAM.js";const B=({active:s,payload:n,label:x})=>s&&n&&n.length?e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg border",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:x}),n.map((a,p)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),e.jsxs("p",{className:"text-sm",children:[a.name,": ",a.value,a.name==="Revenue"?"£":""]})]},p))]}):null;function ge({stats:s,bookingsByDate:n,popularServices:x,dateRange:a}){const[p,G]=g.useState([new Date(a.start),new Date(a.end)]),j=n.map(t=>({date:R(new Date(t.date),"MMM dd"),bookings:t.total,revenue:parseFloat(t.revenue)}));return e.jsxs(N,{children:[e.jsx(v,{title:"Bookings Report"}),e.jsxs("div",{className:"container mx-auto py-6 space-y-6 px-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Bookings Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Detailed insights and metrics for your booking performance"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(i,{className:"relative overflow-hidden group hover:shadow-lg transition-all duration-200",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 -mt-8 -mr-8",children:e.jsx("div",{className:"relative w-full h-full",children:e.jsx("div",{className:"absolute inset-0 bg-primary/5 transform rotate-45"})})}),e.jsx(l,{children:e.jsxs(r,{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase tracking-wider",children:"Total Bookings"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold tracking-tight",children:s.total_bookings}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"this week"})]})]})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Daily Avg"}),e.jsx("p",{className:"text-sm font-medium",children:(s.total_bookings/7).toFixed(1)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Target Achievement"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-sm font-medium",children:[(s.total_bookings/15*100).toFixed(),"%"]}),s.total_bookings>=15?e.jsx(m,{variant:"success",className:"bg-green-100 text-green-800",children:"Exceeded"}):e.jsx(m,{variant:"warning",className:"bg-yellow-100 text-yellow-800",children:"In Progress"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress to Target (15)"}),e.jsxs("span",{className:"font-medium",children:[s.total_bookings,"/15"]})]}),e.jsx(d,{value:s.total_bookings/15*100,className:"h-2",indicatorClassName:y(s.total_bookings>=15?"bg-green-500":"bg-primary")})]})]})})]}),e.jsxs(i,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 -mt-8 -mr-8",children:e.jsx("div",{className:"relative w-full h-full",children:e.jsx("div",{className:"absolute inset-0 bg-primary/5 transform rotate-45"})})}),e.jsx(l,{children:e.jsxs(r,{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase tracking-wider",children:"Completed Bookings"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold tracking-tight",children:s.completed_bookings}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["of ",s.total_bookings]})]})]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Completion Rate"}),e.jsxs("span",{className:"font-medium",children:[s.total_bookings>0?(s.completed_bookings/s.total_bookings*100).toFixed():"0","%"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary/30 rounded-full transition-all duration-500",style:{width:`${s.total_bookings>0?s.completed_bookings/s.total_bookings*100:0}%`}})})]})})})]}),e.jsxs(i,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 -mt-8 -mr-8",children:e.jsx("div",{className:"relative w-full h-full",children:e.jsx("div",{className:"absolute inset-0 bg-primary/5 transform rotate-45"})})}),e.jsx(l,{children:e.jsxs(r,{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase tracking-wider",children:"Total Revenue"}),e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-4xl font-bold tracking-tight",children:["£",typeof s.total_revenue=="number"?s.total_revenue.toFixed(2):typeof s.total_revenue=="string"?parseFloat(s.total_revenue).toFixed(2):"0.00"]})})]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Per Booking"}),e.jsxs("p",{className:"text-sm font-medium",children:["£",typeof s.avg_revenue=="number"?s.avg_revenue.toFixed(2):typeof s.avg_revenue=="string"?parseFloat(s.avg_revenue).toFixed(2):"0.00"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"This Week"}),e.jsxs("p",{className:"text-sm font-medium",children:["+",s.total_revenue,"%"]})]})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(i,{className:"relative overflow-hidden",children:[e.jsx(l,{className:"flex flex-row items-center justify-between",children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-primary"}),"Bookings & Revenue Trend"]})}),e.jsx(o,{className:"h-[400px]",children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(k,{data:j,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"bookingsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})]}),e.jsx(w,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(F,{dataKey:"date",tick:{fill:"hsl(var(--foreground))"},tickLine:{stroke:"hsl(var(--foreground))"}}),e.jsx(h,{yAxisId:"left",tick:{fill:"hsl(var(--foreground))"},tickLine:{stroke:"hsl(var(--foreground))"}}),e.jsx(h,{yAxisId:"right",orientation:"right",tick:{fill:"hsl(var(--foreground))"},tickLine:{stroke:"hsl(var(--foreground))"}}),e.jsx(C,{content:e.jsx(B,{})}),e.jsx(u,{yAxisId:"left",type:"monotone",dataKey:"bookings",stroke:"hsl(var(--primary))",fill:"url(#bookingsGradient)",name:"Bookings"}),e.jsx(u,{yAxisId:"right",type:"monotone",dataKey:"revenue",stroke:"#82ca9d",fill:"url(#revenueGradient)",name:"Revenue"})]})})})]}),e.jsxs(i,{children:[e.jsx(l,{className:"flex flex-row items-center justify-between",children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-primary"}),"Popular Services"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-6",children:x.map(t=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"text-sm font-medium",children:t.service.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.total," bookings"]})]}),e.jsxs(m,{variant:"secondary",className:"font-mono",children:[(t.total/s.total_bookings*100).toFixed(1),"%"]})]}),e.jsx(d,{value:t.total/s.total_bookings*100,className:"h-2"})]},t.service_id))})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsx(l,{className:"flex flex-row items-center justify-between",children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-primary"}),"Discount Impact"]})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Total Discounts"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["£",typeof s.total_discounts=="number"?s.total_discounts.toFixed(2):typeof s.total_discounts=="string"?parseFloat(s.total_discounts).toFixed(2):"0.00"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Avg Discount/Booking"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["£",s.total_bookings>0?((typeof s.total_discounts=="number"?s.total_discounts:typeof s.total_discounts=="string"?parseFloat(s.total_discounts):0)/s.total_bookings).toFixed(2):"0.00"]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Discount Rate"}),e.jsxs(m,{variant:"outline",className:"font-mono",children:[(()=>{const t=typeof s.total_discounts=="number"?s.total_discounts:typeof s.total_discounts=="string"?parseFloat(s.total_discounts):0,c=(typeof s.total_revenue=="number"?s.total_revenue:typeof s.total_revenue=="string"?parseFloat(s.total_revenue):0)+t;return c>0?(t/c*100).toFixed(1):"0"})(),"%"]})]}),e.jsx(d,{value:(()=>{const t=typeof s.total_discounts=="number"?s.total_discounts:typeof s.total_discounts=="string"?parseFloat(s.total_discounts):0,c=(typeof s.total_revenue=="number"?s.total_revenue:typeof s.total_revenue=="string"?parseFloat(s.total_revenue):0)+t;return c>0?t/c*100:0})(),className:"h-2"})]})]})})]}),e.jsxs(i,{children:[e.jsx(l,{className:"flex flex-row items-center justify-between",children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-primary"}),"Service Utilization"]})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Unique Services"}),e.jsx("span",{className:"text-2xl font-bold",children:s.unique_services})]}),e.jsx(d,{value:s.unique_services/(s.unique_services*1.5)*100,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Avg Bookings per Service"}),e.jsx("span",{className:"text-2xl font-bold",children:(s.total_bookings/s.unique_services).toFixed(1)})]}),e.jsx(d,{value:s.total_bookings/(s.unique_services*s.total_bookings)*100,className:"h-2"})]})]})})]})]})]})]})}export{ge as default};
