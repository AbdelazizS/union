import{R as y,r as Pe,j as e,$ as Te,m as me}from"./app-D5zgOKAD.js";import{L as _e,P as Re,H as Ee}from"./AdminLayout-BQ9sENZH.js";import{C as k,b as N,c as S,a as O}from"./card-BKGLJ8p-.js";import{T as Be,a as $e,b as pe,c as _,d as Ie,e as R}from"./table-C18x9kzE.js";import{a as he,B as Fe}from"./index-C8-8ZKTM.js";import{t as fe}from"./index-CDOhrpKr.js";import{L as Ke}from"./loader-circle-2EsVzQAg.js";import{C as xe}from"./calendar-CP_I-VWs.js";import{P as We}from"./pound-sterling-BnFhEes9.js";import{P as J}from"./package-Qv90njPe.js";import{S as ae}from"./star-CbgFmvPS.js";import{C as Me}from"./clock-DyJkOR0m.js";import{C as Ve}from"./circle-check-CobA_xOl.js";import{T as ze,A as Ge,a as ye}from"./AreaChart-DdVTCY11.js";import{i as Ue,D as He,f as Xe,E as Ye,L as ne,a as Z,C as qe,A as Qe,b as z,c as Je,d as ce,h as Ze,e as et,g as ke,u as tt,G as rt,j as ve,k as it,X as te,Y as H,l as at,R as G,m as se,T as U,n as oe,o as le,B as nt}from"./generateCategoricalChart-nqkF7l5G.js";import{P as ge,a as je}from"./PieChart-OGSSNER4.js";import{B as st,A as be,a as ot}from"./BarChart-iUZzSOiQ.js";import{P as lt}from"./plus-DHVrmD6B.js";import{F as ct}from"./file-text-CyaKJaEx.js";import"./input-D5FKwQjB.js";import"./separator-ZBq7OQqG.js";import"./sheet-CpllKNoK.js";import"./index-B6dbISNz.js";import"./index-BSVezLny.js";import"./Combination-Cmb1a147.js";import"./index-BBAzO_4d.js";import"./tslib.es6-CmEaCU22.js";import"./index-Cuq-Mmvq.js";import"./x-DkObbUL-.js";import"./createLucideIcon-AWgR876W.js";import"./index-BB6OtDRK.js";import"./index-DNxp1Wi1.js";import"./index-CrEWOBzh.js";import"./layers-ai9ES5Yn.js";import"./circle-help-DHWhEvao.js";import"./dropdown-menu-CixTnASt.js";import"./index-Crc4BVh8.js";import"./chevron-right-DKEmXFr0.js";import"./check-BhB20Pym.js";import"./user-Ch48qi0I.js";import"./index-D8untdAM.js";var dt=["type","layout","connectNulls","ref"],ut=["key"];function $(t){"@babel/helpers - typeof";return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},$(t)}function Ae(t,i){if(t==null)return{};var a=mt(t,i),r,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(s=0;s<d.length;s++)r=d[s],!(i.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function mt(t,i){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(i.indexOf(r)>=0)continue;a[r]=t[r]}return a}function X(){return X=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},X.apply(this,arguments)}function we(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function g(t){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?we(Object(a),!0).forEach(function(r){A(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):we(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function E(t){return xt(t)||ft(t)||ht(t)||pt()}function pt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ht(t,i){if(t){if(typeof t=="string")return de(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return de(t,i)}}function ft(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xt(t){if(Array.isArray(t))return de(t)}function de(t,i){(i==null||i>t.length)&&(i=t.length);for(var a=0,r=new Array(i);a<i;a++)r[a]=t[a];return r}function yt(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function Ce(t,i){for(var a=0;a<i.length;a++){var r=i[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Se(r.key),r)}}function vt(t,i,a){return i&&Ce(t.prototype,i),a&&Ce(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function gt(t,i,a){return i=re(i),jt(t,Ne()?Reflect.construct(i,a||[],re(t).constructor):i.apply(t,a))}function jt(t,i){if(i&&($(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bt(t)}function bt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ne=function(){return!!t})()}function re(t){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},re(t)}function At(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&ue(t,i)}function ue(t,i){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},ue(t,i)}function A(t,i,a){return i=Se(i),i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}function Se(t){var i=wt(t,"string");return $(i)=="symbol"?i:i+""}function wt(t,i){if($(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,i);if($(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Y=function(t){function i(){var a;yt(this,i);for(var r=arguments.length,s=new Array(r),d=0;d<r;d++)s[d]=arguments[d];return a=gt(this,i,[].concat(s)),A(a,"state",{isAnimationFinished:!0,totalLength:0}),A(a,"generateSimpleStrokeDasharray",function(o,c){return"".concat(c,"px ").concat(o-c,"px")}),A(a,"getStrokeDasharray",function(o,c,p){var n=p.reduce(function(w,P){return w+P});if(!n)return a.generateSimpleStrokeDasharray(c,o);for(var l=Math.floor(o/n),m=o%n,u=c-o,f=[],h=0,x=0;h<p.length;x+=p[h],++h)if(x+p[h]>m){f=[].concat(E(p.slice(0,h)),[m-x]);break}var b=f.length%2===0?[0,u]:[u];return[].concat(E(i.repeat(p,l)),E(f),b).map(function(w){return"".concat(w,"px")}).join(", ")}),A(a,"id",tt("recharts-line-")),A(a,"pathRef",function(o){a.mainCurve=o}),A(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),A(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return At(i,t),vt(i,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var d=this.props,o=d.points,c=d.xAxis,p=d.yAxis,n=d.layout,l=d.children,m=Xe(l,Ye);if(!m)return null;var u=function(x,b){return{x:x.x,y:x.y,value:x.value,errorVal:ke(x.payload,b)}},f={clipPath:r?"url(#clipPath-".concat(s,")"):null};return y.createElement(ne,f,m.map(function(h){return y.cloneElement(h,{key:"bar-".concat(h.props.dataKey),data:o,xAxis:c,yAxis:p,layout:n,dataPointFormatter:u})}))}},{key:"renderDots",value:function(r,s,d){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var c=this.props,p=c.dot,n=c.points,l=c.dataKey,m=Z(this.props,!1),u=Z(p,!0),f=n.map(function(x,b){var w=g(g(g({key:"dot-".concat(b),r:3},m),u),{},{index:b,cx:x.x,cy:x.y,value:x.value,dataKey:l,payload:x.payload,points:n});return i.renderDotItem(p,w)}),h={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(d,")"):null};return y.createElement(ne,X({className:"recharts-line-dots",key:"dots"},h),f)}},{key:"renderCurveStatically",value:function(r,s,d,o){var c=this.props,p=c.type,n=c.layout,l=c.connectNulls;c.ref;var m=Ae(c,dt),u=g(g(g({},Z(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(d,")"):null,points:r},o),{},{type:p,layout:n,connectNulls:l});return y.createElement(qe,X({},u,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,s){var d=this,o=this.props,c=o.points,p=o.strokeDasharray,n=o.isAnimationActive,l=o.animationBegin,m=o.animationDuration,u=o.animationEasing,f=o.animationId,h=o.animateNewValues,x=o.width,b=o.height,w=this.state,P=w.prevPoints,I=w.totalLength;return y.createElement(Qe,{begin:l,duration:m,isActive:n,easing:u,from:{t:0},to:{t:1},key:"line-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(L){var C=L.t;if(P){var F=P.length/c.length,D=c.map(function(v,ie){var M=Math.floor(ie*F);if(P[M]){var V=P[M],T=z(V.x,v.x),Oe=z(V.y,v.y);return g(g({},v),{},{x:T(C),y:Oe(C)})}if(h){var De=z(x*2,v.x),Le=z(b/2,v.y);return g(g({},v),{},{x:De(C),y:Le(C)})}return g(g({},v),{},{x:v.x,y:v.y})});return d.renderCurveStatically(D,r,s)}var q=z(0,I),K=q(C),W;if(p){var Q="".concat(p).split(/[,\s]+/gim).map(function(v){return parseFloat(v)});W=d.getStrokeDasharray(K,I,Q)}else W=d.generateSimpleStrokeDasharray(I,K);return d.renderCurveStatically(c,r,s,{strokeDasharray:W})})}},{key:"renderCurve",value:function(r,s){var d=this.props,o=d.points,c=d.isAnimationActive,p=this.state,n=p.prevPoints,l=p.totalLength;return c&&o&&o.length&&(!n&&l>0||!Je(n,o))?this.renderCurveWithAnimation(r,s):this.renderCurveStatically(o,r,s)}},{key:"render",value:function(){var r,s=this.props,d=s.hide,o=s.dot,c=s.points,p=s.className,n=s.xAxis,l=s.yAxis,m=s.top,u=s.left,f=s.width,h=s.height,x=s.isAnimationActive,b=s.id;if(d||!c||!c.length)return null;var w=this.state.isAnimationFinished,P=c.length===1,I=he("recharts-line",p),L=n&&n.allowDataOverflow,C=l&&l.allowDataOverflow,F=L||C,D=ce(b)?this.id:b,q=(r=Z(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},K=q.r,W=K===void 0?3:K,Q=q.strokeWidth,v=Q===void 0?2:Q,ie=Ze(o)?o:{},M=ie.clipDot,V=M===void 0?!0:M,T=W*2+v;return y.createElement(ne,{className:I},L||C?y.createElement("defs",null,y.createElement("clipPath",{id:"clipPath-".concat(D)},y.createElement("rect",{x:L?u:u-f/2,y:C?m:m-h/2,width:L?f:f*2,height:C?h:h*2})),!V&&y.createElement("clipPath",{id:"clipPath-dots-".concat(D)},y.createElement("rect",{x:u-T/2,y:m-T/2,width:f+T,height:h+T}))):null,!P&&this.renderCurve(F,D),this.renderErrorBar(F,D),(P||o)&&this.renderDots(F,V,D),(!x||w)&&et.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,s){for(var d=r.length%2!==0?[].concat(E(r),[0]):r,o=[],c=0;c<s;++c)o=[].concat(E(o),E(d));return o}},{key:"renderDotItem",value:function(r,s){var d;if(y.isValidElement(r))d=y.cloneElement(r,s);else if(Ue(r))d=r(s);else{var o=s.key,c=Ae(s,ut),p=he("recharts-line-dot",typeof r!="boolean"?r.className:"");d=y.createElement(He,X({key:o},c,{className:p}))}return d}}])}(Pe.PureComponent);A(Y,"displayName","Line");A(Y,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!rt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});A(Y,"getComposedData",function(t){var i=t.props,a=t.xAxis,r=t.yAxis,s=t.xAxisTicks,d=t.yAxisTicks,o=t.dataKey,c=t.bandSize,p=t.displayedData,n=t.offset,l=i.layout,m=p.map(function(u,f){var h=ke(u,o);return l==="horizontal"?{x:ve({axis:a,ticks:s,bandSize:c,entry:u,index:f}),y:ce(h)?null:r.scale(h),value:h,payload:u}:{x:ce(h)?null:a.scale(h),y:ve({axis:r,ticks:d,bandSize:c,entry:u,index:f}),value:h,payload:u}});return g({points:m,layout:l},n)});var Ct=it({chartName:"LineChart",GraphicalChild:Y,axisComponents:[{axisType:"xAxis",AxisComp:te},{axisType:"yAxis",AxisComp:H}],formatAxisMap:at});const j={primary:"#2563eb",secondary:"#7c3aed",success:"#059669",warning:"#d97706",danger:"#dc2626"},B=[j.primary,j.secondary,j.success,j.warning,j.danger],ee=({active:t,payload:i,label:a})=>t&&i&&i.length?e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:a}),i.map((r,s)=>e.jsxs("p",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r.color}}),e.jsxs("span",{className:"text-muted-foreground",children:[r.name,":"]}),e.jsxs("span",{className:"font-medium",children:[r.name.toLowerCase().includes("revenue")?"£":"",typeof r.value=="number"?r.value.toLocaleString():r.value]})]},s))]}):null;function mr({stats:t={},charts:i={weeklyRevenue:[],statusDistribution:{},categoryDistribution:[],popularServices:[],satisfactionTrend:[]},recentBookings:a=[]}){const[r,s]=Pe.useState(!1),d=async()=>{try{s(!0),await me.reload({only:["stats","charts","recentBookings"]}),fe.success("Dashboard data refreshed")}catch{fe.error("Failed to refresh data")}finally{s(!1)}},o=({title:n,value:l,icon:m,growth:u,subtitle:f})=>e.jsxs(k,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:n}),e.jsx(m,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(O,{children:[e.jsx("div",{className:"text-2xl font-bold",children:typeof l=="number"&&n.toLowerCase().includes("revenue")?`£${l.toLocaleString()}`:l}),u!==void 0&&e.jsx("p",{className:"text-xs text-muted-foreground flex items-center",children:u==="new"?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"h-4 w-4 text-green-500 mr-1"}),"New today"]}):e.jsxs(e.Fragment,{children:[Number(u)>=0?e.jsx(be,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(ot,{className:"h-4 w-4 text-red-500 mr-1"}),Math.abs(Number(u)).toFixed(1),"% vs yesterday"]})}),f&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:f})]})]}),c=({title:n,description:l,icon:m,href:u,color:f="primary"})=>e.jsxs(k,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>me.visit(u),children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:n}),e.jsx(m,{className:`h-4 w-4 text-${f}`})]}),e.jsx(O,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:l})})]}),p=({status:n})=>{const l={pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l[n]||"bg-gray-100 text-gray-800"}`,children:n.charAt(0).toUpperCase()+n.slice(1)})};return e.jsxs(_e,{children:[e.jsx(Te,{title:"Admin Dashboard"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold leading-tight text-gray-800",children:"Dashboard Overview"}),e.jsxs(Fe,{onClick:d,variant:"outline",size:"sm",disabled:r,children:[r&&e.jsx(Ke,{className:"h-4 w-4 animate-spin mr-2"}),"Refresh"]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(o,{title:"Total Bookings",value:t.totalBookings??0,icon:xe,growth:t.bookingsGrowth,subtitle:t.bookingTimeContext}),e.jsx(o,{title:"Today's Revenue",value:t.todayRevenue??0,icon:We,growth:t.revenueGrowth,subtitle:"vs yesterday"}),e.jsx(o,{title:"Active Services",value:t.activeServices??0,icon:J,subtitle:`${t.totalCategories??0} categories`}),e.jsx(o,{title:"Customer Rating",value:`${t.averageRating??0}/5`,icon:ae,subtitle:`${t.totalReviews??0} reviews`})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(o,{title:"Today's Bookings",value:t.todayBookings??0,icon:Me,subtitle:`${t.pendingToday??0} pending`}),e.jsx(o,{title:"Active Coupons",value:t.activeCoupons??0,icon:Re,subtitle:`${t.couponUsage??0}% usage rate`}),e.jsx(o,{title:"Partners",value:t.activePartners??0,icon:Ee,subtitle:"Active partnerships"}),e.jsx(o,{title:"Completion Rate",value:`${t.completionRate??0}%`,icon:Ve,growth:t.completionRateGrowth})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(k,{children:[e.jsx(N,{children:e.jsxs(S,{className:"flex items-center gap-2 text-base",children:[e.jsx(ze,{className:"h-5 w-5 text-primary"}),"Weekly Revenue & Bookings"]})}),e.jsx(O,{className:"h-[300px]",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(Ge,{data:i.weeklyRevenue??[],children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:j.primary,stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:j.primary,stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorBookings",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:j.secondary,stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:j.secondary,stopOpacity:0})]})]}),e.jsx(te,{dataKey:"date"}),e.jsx(H,{yAxisId:"left"}),e.jsx(H,{yAxisId:"right",orientation:"right"}),e.jsx(se,{strokeDasharray:"3 3"}),e.jsx(U,{content:e.jsx(ee,{})}),e.jsx(oe,{}),e.jsx(ye,{type:"monotone",dataKey:"revenue",stroke:j.primary,fillOpacity:1,fill:"url(#colorRevenue)",yAxisId:"left",name:"Revenue"}),e.jsx(ye,{type:"monotone",dataKey:"bookings",stroke:j.secondary,fillOpacity:1,fill:"url(#colorBookings)",yAxisId:"right",name:"Bookings"})]})})})]}),e.jsxs(k,{children:[e.jsx(N,{children:e.jsxs(S,{className:"flex items-center gap-2 text-base",children:[e.jsx(J,{className:"h-5 w-5 text-primary"}),"Booking Status Distribution"]})}),e.jsx(O,{className:"h-[300px]",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(ge,{children:[e.jsx(je,{data:Object.entries(i.statusDistribution??{}).map(([n,l])=>({name:n.charAt(0).toUpperCase()+n.slice(1),value:l})),cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",label:({name:n,percent:l})=>`${n} (${(l*100).toFixed(0)}%)`,children:Object.entries(i.statusDistribution??{}).map((n,l)=>e.jsx(le,{fill:B[l%B.length]},`cell-${l}`))}),e.jsx(U,{content:e.jsx(ee,{})}),e.jsx(oe,{})]})})})]}),e.jsxs(k,{children:[e.jsx(N,{children:e.jsxs(S,{className:"flex items-center gap-2 text-base",children:[e.jsx(J,{className:"h-5 w-5 text-primary"}),"Service Categories"]})}),e.jsx(O,{className:"h-[300px]",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(ge,{children:[e.jsx(je,{data:(i.categoryDistribution??[]).map(n=>({...n,value:n.value||.1})),cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:2,dataKey:"value",nameKey:"name",label:({name:n,value:l,percent:m})=>{const u=l===.1?0:(m*100).toFixed(0);return`${n} (${u}%)`},labelLine:{stroke:"hsl(var(--muted-foreground))",strokeWidth:.5},children:(i.categoryDistribution??[]).map((n,l)=>e.jsx(le,{fill:B[l%B.length],fillOpacity:n.value===0?.5:1},`cell-${l}`))}),e.jsx(U,{content:({active:n,payload:l})=>{if(n&&l&&l.length){const m=l[0].payload;return e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border",children:[e.jsx("p",{className:"text-sm font-medium",children:m.name}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Services: ",m.originalValue||0]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Percentage: ",m.value===.1?"0":(l[0].percent*100).toFixed(0),"%"]})]})}return null}}),e.jsx(oe,{formatter:(n,l)=>{const{payload:m}=l,u=m.value===.1?0:(m.percent*100).toFixed(0);return`${n} (${u}%)`}})]})})})]}),e.jsxs(k,{children:[e.jsx(N,{children:e.jsxs(S,{className:"flex items-center gap-2 text-base",children:[e.jsx(ae,{className:"h-5 w-5 text-primary"}),"Popular Services"]})}),e.jsx(O,{className:"h-[300px]",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(st,{data:(i.popularServices??[]).sort((n,l)=>l.bookings-n.bookings).slice(0,5),margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(se,{strokeDasharray:"3 3"}),e.jsx(te,{dataKey:"name",interval:0,tick:{angle:-45,textAnchor:"end",fontSize:12,fill:"hsl(var(--muted-foreground))"}}),e.jsx(H,{}),e.jsx(U,{content:e.jsx(ee,{})}),e.jsx(nt,{dataKey:"bookings",name:"Bookings",radius:[4,4,0,0],children:(i.popularServices??[]).sort((n,l)=>l.bookings-n.bookings).slice(0,5).map((n,l)=>e.jsx(le,{fill:B[l%B.length]},`cell-${l}`))})]})})})]}),e.jsxs(k,{className:"md:col-span-2",children:[e.jsx(N,{children:e.jsxs(S,{className:"flex items-center gap-2 text-base",children:[e.jsx(ae,{className:"h-5 w-5 text-primary"}),"Customer Satisfaction Trend"]})}),e.jsx(O,{className:"h-[300px]",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(Ct,{data:i.satisfactionTrend??[],children:[e.jsx(se,{strokeDasharray:"3 3"}),e.jsx(te,{dataKey:"date"}),e.jsx(H,{domain:[0,5]}),e.jsx(U,{content:e.jsx(ee,{})}),e.jsx(Y,{type:"monotone",dataKey:"rating",stroke:j.primary,strokeWidth:2,dot:{r:4},name:"Rating"})]})})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(c,{title:"New Booking",description:"Create a new service booking",icon:lt,href:route("admin.bookings.create"),color:"primary"}),e.jsx(c,{title:"Manage Categories",description:"View and manage service categories",icon:J,href:route("admin.service-categories.index"),color:"primary"}),e.jsx(c,{title:"Manage Services",description:"View and manage all services",icon:ct,href:route("admin.services.index"),color:"primary"}),e.jsx(c,{title:"Manage Bookings",description:"View all bookings",icon:xe,href:route("admin.bookings.index"),color:"primary"})]}),e.jsxs(k,{children:[e.jsx(N,{children:e.jsx(S,{className:"text-base",children:"Recent Bookings"})}),e.jsx(O,{children:e.jsxs(Be,{children:[e.jsx($e,{children:e.jsxs(pe,{children:[e.jsx(_,{children:"ID"}),e.jsx(_,{children:"Customer"}),e.jsx(_,{children:"Service"}),e.jsx(_,{children:"Amount"}),e.jsx(_,{children:"Status"}),e.jsx(_,{children:"Date"})]})}),e.jsx(Ie,{children:(a??[]).map(n=>e.jsxs(pe,{children:[e.jsxs(R,{children:["#",n.id]}),e.jsx(R,{children:n.customer_name}),e.jsx(R,{children:n.service.name}),e.jsxs(R,{children:["£",n.final_amount]}),e.jsx(R,{children:e.jsx(p,{status:n.status})}),e.jsx(R,{children:n.created_at})]},n.id))})]})})]})]})]})]})}export{mr as default};
