import{r as n,q as z,j as e,$ as G,m as d}from"./app-DN1qyw_4.js";import{t as o}from"./index-COa0dWTm.js";import{B as y}from"./index-LX2bqK-N.js";import{D as J}from"./data-table-lNLW6wDK.js";import{columns as M}from"./columns-BYkpkHf7.js";import{u as F}from"./index.esm-BKbCLyPq.js";import{s as T,o as Q,a as p,f as W,b as X,n as w}from"./index-BezgtxjW.js";import{D as h,a as Y,b as u,c as x,d as f,e as N,f as Z}from"./dialog-CY5EnKOC.js";import{ServiceForm as A}from"./ServiceForm-DMMlZ138.js";import{L as ee}from"./AdminLayout-CZ0FKSeN.js";import{P as se}from"./plus-Bp36QGIZ.js";import"./index-BbdZmysQ.js";import"./table-BzJnXkzV.js";import"./input-DGoI5Joj.js";import"./select-FtBAXfob.js";import"./index-BMWwzzsh.js";import"./index-BAOtmrvp.js";import"./Combination-CFYBKmqt.js";import"./tslib.es6-BUas5LQb.js";import"./index-DHYjMWsS.js";import"./index-RM6Jqcin.js";import"./index-DN810jkT.js";import"./index-qC52FuWJ.js";import"./chevron-down-DHOMMINn.js";import"./createLucideIcon-BpMd3PhH.js";import"./check-BX_ytt3u.js";import"./dropdown-menu-Dup2U6KE.js";import"./index-D7fmTsiv.js";import"./chevron-right-DqXEnUok.js";import"./badge-uQ6I-SGo.js";import"./ellipsis-BM26qcpv.js";import"./eye-D4W9MdIN.js";import"./pencil-ClhZq3Pc.js";import"./trash-C4uD6DVN.js";import"./index-Be8rxKK8.js";import"./x-w-3jbt9P.js";import"./form-CdwVkoaf.js";import"./label-tZuXtweX.js";import"./switch-D54_V_9Y.js";import"./textarea-BY2Wfk79.js";import"./image-upload-BsLYQDfr.js";import"./index-_Y-GkwGe.js";import"./separator-CvwyiO9a.js";import"./sheet-mSlUcbMw.js";import"./calendar-CNUueBHR.js";import"./message-square-2aVn-Bt6.js";import"./circle-help-dDNQ1wQ3.js";import"./file-text-D1ogXrnk.js";import"./user-CNfi-Wmw.js";const B=Q({name:p().min(2,"Name must be at least 2 characters"),category_id:w().min(1,"Category is required"),description:p().min(10,"Description must be at least 10 characters"),base_price:w().min(0,"Base price must be positive"),duration_minutes:w().min(1,"Duration must be at least 1 minute"),features:X(p()).optional(),is_active:W().default(!0),image:p().optional()}),a={name:"",category_id:"",description:"",base_price:0,duration_minutes:60,features:[],is_active:!0,image:""};function Ye({services:V,categories:D}){var E;const[$,_]=n.useState(!1),[I,j]=n.useState(!1),[P,c]=n.useState(!1),[U,C]=n.useState(!1),[O,g]=n.useState(null),[i,v]=n.useState(null),[l,t]=n.useState(!1),{auth:re}=z().props,S=F({resolver:T(B),defaultValues:a}),m=F({resolver:T(B),defaultValues:a}),b=()=>{d.reload({only:["services"]})},k=async s=>{t(!0);try{d.post("/admin/services",s,{onSuccess:()=>{o.success("Service created successfully"),_(!1),S.reset(a),b()},onError:r=>{console.log(r),o.error(r.message||"Something went wrong")},onFinish:()=>{t(!1)}})}catch{o.error("Something went wrong"),t(!1)}},q=async s=>{t(!0);try{s.image===O.image_url&&delete s.image,d.put(`/admin/services/${O.id}`,s,{onSuccess:()=>{o.success("Service updated successfully"),j(!1),m.reset(a),g(null),b()},onError:r=>{console.error("Update error:",r),o.error(r.error||"Something went wrong")},onFinish:()=>{t(!1)}})}catch(r){console.error("Update error:",r),o.error("Something went wrong"),t(!1)}},L=s=>{var r;g(s),m.reset({...s,category_id:(r=s.category)==null?void 0:r.id,features:s.features||[],base_price:Number(s.base_price)}),j(!0)},H=async s=>{t(!0);try{d.delete(route("admin.services.destroy",s.id),{onSuccess:()=>{o.success("Service deleted successfully"),c(!1),v(null),b()},onError:r=>{o.error(r.message||"Something went wrong")},onFinish:()=>{t(!1)}})}catch{o.error("Something went wrong"),t(!1)}},K=s=>{v(s),C(!0)},R=s=>{v(s),c(!0)};return e.jsxs(ee,{children:[e.jsx(G,{title:"Services"}),e.jsxs("div",{className:"container mx-auto py-10 px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Services"}),e.jsxs(h,{open:$,onOpenChange:s=>{s||S.reset(a),_(s)},children:[e.jsx(Y,{asChild:!0,children:e.jsxs(y,{children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Add Service"]})}),e.jsxs(u,{className:"max-w-2xl",children:[e.jsxs(x,{children:[e.jsx(f,{children:"Add New Service"}),e.jsx(N,{children:"Fill in the details to create a new service."})]}),e.jsx(A,{form:S,onSubmit:k,isSubmitting:l,categories:D})]})]}),e.jsx(h,{open:I,onOpenChange:s=>{s||(m.reset(a),g(null)),j(s)},children:e.jsxs(u,{className:"max-w-2xl",children:[e.jsxs(x,{children:[e.jsx(f,{children:"Edit Service"}),e.jsx(N,{children:"Update the details of this service."})]}),e.jsx(A,{form:m,onSubmit:q,isSubmitting:l,categories:D})]})})]}),e.jsx(J,{columns:M(L,R,K),data:V,searchKey:"name"}),e.jsx(h,{open:P,onOpenChange:c,children:e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsx(f,{children:"Delete Service"}),e.jsx(N,{children:"Are you sure you want to delete this service? This action cannot be undone."})]}),e.jsxs(Z,{children:[e.jsx(y,{variant:"outline",onClick:()=>c(!1),disabled:l,children:"Cancel"}),e.jsx(y,{variant:"destructive",onClick:()=>H(i),disabled:l,children:"Delete"})]})]})}),e.jsx(h,{open:U,onOpenChange:C,children:e.jsxs(u,{className:"max-w-2xl",children:[e.jsx(x,{children:e.jsx(f,{children:"View Service Details"})}),i&&e.jsxs("div",{className:"space-y-4",children:[i.image_url&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Image"}),e.jsx("div",{className:"relative w-full h-48 rounded-lg overflow-hidden border",children:e.jsx("img",{src:i.image_url,alt:i.name,className:"object-cover w-full h-full"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Name"}),e.jsx("p",{children:i.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Category"}),e.jsx("p",{children:(E=i.category)==null?void 0:E.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Description"}),e.jsx("p",{className:"whitespace-pre-wrap",children:i.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Base Price"}),e.jsxs("p",{children:["$",i.base_price]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Duration"}),e.jsxs("p",{children:[i.duration_minutes," minutes"]})]}),i.features&&i.features.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Features"}),e.jsx("ul",{className:"list-disc list-inside",children:i.features.map((s,r)=>e.jsx("li",{children:s},r))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Status"}),e.jsx("p",{children:i.is_active?"Active":"Inactive"})]})]})]})})]})]})}export{Ye as default};
