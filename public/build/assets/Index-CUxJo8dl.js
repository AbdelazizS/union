import{r as a,q,j as e,$ as H,m as n}from"./app-D5zgOKAD.js";import{t as o}from"./index-CDOhrpKr.js";import{B as f}from"./index-C8-8ZKTM.js";import{D as K}from"./data-table-xuiH6-jF.js";import{columns as M}from"./columns-BYXSkI7m.js";import{u as O}from"./form-B0NGfjOj.js";import{s as C}from"./zod-CTB78kiI.js";import{o as R,s as c,b as z,a as G}from"./index-DWbN24nP.js";import{D as g,b as j,c as v,d as S,e as E,f as J}from"./dialog-sDPXERkU.js";import{ServiceForm as Q}from"./ServiceForm-DaRxFXuG.js";import{L as W}from"./AdminLayout-BQ9sENZH.js";import{P as X}from"./plus-DHVrmD6B.js";import"./index-BBAzO_4d.js";import"./table-C18x9kzE.js";import"./input-D5FKwQjB.js";import"./select-DgOef9zO.js";import"./index-BSVezLny.js";import"./index-Crc4BVh8.js";import"./Combination-Cmb1a147.js";import"./tslib.es6-CmEaCU22.js";import"./index-BB6OtDRK.js";import"./index-DNxp1Wi1.js";import"./index-BKYgjeKX.js";import"./index-CrEWOBzh.js";import"./chevron-down-CztE_ilu.js";import"./createLucideIcon-AWgR876W.js";import"./check-BhB20Pym.js";import"./dropdown-menu-CixTnASt.js";import"./index-Cuq-Mmvq.js";import"./chevron-right-DKEmXFr0.js";import"./badge-DAUpYQro.js";import"./ellipsis-D87pnp6L.js";import"./eye-nL3GmjNe.js";import"./pencil-DUvomj0i.js";import"./trash-Dn0Y1l6S.js";import"./label-BHpa9F8K.js";import"./index-B6dbISNz.js";import"./x-DkObbUL-.js";import"./textarea-rFmGb7jf.js";import"./switch-CQMIwMOV.js";import"./image-upload-DB-EMDCR.js";import"./index-D8untdAM.js";import"./separator-ZBq7OQqG.js";import"./sheet-CpllKNoK.js";import"./layers-ai9ES5Yn.js";import"./calendar-CP_I-VWs.js";import"./circle-help-DHWhEvao.js";import"./file-text-CyaKJaEx.js";import"./user-Ch48qi0I.js";const _=R({name:c().min(2,"Name must be at least 2 characters"),category_id:c().min(1,"Please select a category"),description:c().min(10,"Description must be at least 10 characters"),features:G(c()).optional(),is_active:z().default(!0),image:c().optional()}),d={name:"",category_id:"",description:"",features:[""],is_active:!0,image:""};function We({services:T,categories:F}){var D;const[Y,Z]=a.useState(!1),[V,p]=a.useState(!1),[$,l]=a.useState(!1),[k,y]=a.useState(!1),[w,u]=a.useState(null),[t,h]=a.useState(null),[x,i]=a.useState(!1),{auth:ee}=q().props;O({resolver:C(_),defaultValues:d});const m=O({resolver:C(_),defaultValues:d}),b=()=>{n.reload({only:["services"]})},A=async s=>{i(!0);try{s.image===w.image_url&&delete s.image,n.put(`/admin/services/${w.id}`,s,{onSuccess:()=>{o.success("Service updated successfully"),p(!1),m.reset(d),u(null),b()},onError:r=>{console.error("Update error:",r),o.error(r.error||"Something went wrong")},onFinish:()=>{i(!1)}})}catch(r){console.error("Update error:",r),o.error("Something went wrong"),i(!1)}},I=s=>{var r,N;u(s),m.reset({...s,category_id:(N=(r=s.category)==null?void 0:r.id)==null?void 0:N.toString(),features:s.features||[]}),p(!0)},P=async s=>{i(!0);try{n.delete(route("admin.services.destroy",s.id),{onSuccess:()=>{o.success("Service deleted successfully"),l(!1),h(null),b()},onError:r=>{o.error(r.message||"Something went wrong")},onFinish:()=>{i(!1)}})}catch{o.error("Something went wrong"),i(!1)}},U=async s=>{i(!0);try{n.put(route("admin.services.toggle-status",s.id),{},{onSuccess:()=>{o.success(`Service ${s.is_active?"deactivated":"activated"} successfully`)},onError:r=>{o.error(r.message||"Something went wrong")},onFinish:()=>{i(!1)}})}catch{o.error("Something went wrong"),i(!1)}},B=s=>{h(s),y(!0)},L=s=>{h(s),l(!0)};return e.jsxs(W,{children:[e.jsx(H,{title:"Services"}),e.jsxs("div",{className:"container mx-auto py-10 px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Services"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your cleaning services"})]}),e.jsxs(f,{onClick:()=>n.visit(route("admin.services.create")),children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Add Service"]})]}),e.jsx(K,{columns:M(I,L,U,B),data:T,searchKey:"name"}),e.jsx(g,{open:V,onOpenChange:s=>{s||(u(null),m.reset(d)),p(s)},children:e.jsxs(j,{className:"max-w-2xl",children:[e.jsxs(v,{children:[e.jsx(S,{children:"Edit Service"}),e.jsx(E,{children:"Update the details of this service."})]}),e.jsx(Q,{form:m,onSubmit:A,isSubmitting:x,categories:F})]})}),e.jsx(g,{open:$,onOpenChange:l,children:e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(S,{children:"Delete Service"}),e.jsx(E,{children:"Are you sure you want to delete this service? This action cannot be undone."})]}),e.jsxs(J,{children:[e.jsx(f,{variant:"outline",onClick:()=>l(!1),disabled:x,children:"Cancel"}),e.jsx(f,{variant:"destructive",onClick:()=>P(t),disabled:x,children:"Delete"})]})]})}),e.jsx(g,{open:k,onOpenChange:y,children:e.jsxs(j,{className:"max-w-2xl",children:[e.jsx(v,{children:e.jsx(S,{children:"View Service Details"})}),t&&e.jsxs("div",{className:"space-y-4",children:[t.image_url&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Image"}),e.jsx("div",{className:"relative w-full h-48 rounded-lg overflow-hidden border",children:e.jsx("img",{src:t.image_url,alt:t.name,className:"object-cover w-full h-full"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Name"}),e.jsx("p",{children:t.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Category"}),e.jsx("p",{children:(D=t.category)==null?void 0:D.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Description"}),e.jsx("p",{className:"whitespace-pre-wrap",children:t.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Status"}),e.jsx("p",{children:t.is_active?"Active":"Inactive"})]})]})]})})]})]})}export{We as default};
