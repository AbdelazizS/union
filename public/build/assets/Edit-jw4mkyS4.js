import{r as h,j as e,$ as I,m as j}from"./app-D5zgOKAD.js";import{u as T,F as k,a as c,b as l,c as o,d as m,e as p}from"./form-B0NGfjOj.js";import{s as P}from"./zod-CTB78kiI.js";import{o as V,s as d,b as B,a as L}from"./index-DWbN24nP.js";import{t as g}from"./index-CDOhrpKr.js";import{B as u}from"./index-C8-8ZKTM.js";import{I as y}from"./input-D5FKwQjB.js";import{T as z}from"./textarea-rFmGb7jf.js";import{S as A,a as D,b as R,c as U,d as $}from"./select-DgOef9zO.js";import{S as M}from"./switch-CQMIwMOV.js";import"./card-BKGLJ8p-.js";import{L as X}from"./AdminLayout-BQ9sENZH.js";import{I as q}from"./image-upload-DB-EMDCR.js";import{P as G}from"./plus-DHVrmD6B.js";import{X as H}from"./x-DkObbUL-.js";import"./label-BHpa9F8K.js";import"./index-BBAzO_4d.js";import"./index-BSVezLny.js";import"./index-Crc4BVh8.js";import"./Combination-Cmb1a147.js";import"./tslib.es6-CmEaCU22.js";import"./index-BB6OtDRK.js";import"./index-DNxp1Wi1.js";import"./index-BKYgjeKX.js";import"./index-CrEWOBzh.js";import"./chevron-down-CztE_ilu.js";import"./createLucideIcon-AWgR876W.js";import"./check-BhB20Pym.js";import"./separator-ZBq7OQqG.js";import"./sheet-CpllKNoK.js";import"./index-B6dbISNz.js";import"./index-Cuq-Mmvq.js";import"./layers-ai9ES5Yn.js";import"./calendar-CP_I-VWs.js";import"./circle-help-DHWhEvao.js";import"./file-text-CyaKJaEx.js";import"./dropdown-menu-CixTnASt.js";import"./chevron-right-DKEmXFr0.js";import"./user-Ch48qi0I.js";import"./index-D8untdAM.js";const J=V({name:d().min(2,"Name must be at least 2 characters"),category_id:d().min(1,"Please select a category"),description:d().min(10,"Description must be at least 10 characters"),features:L(d()).optional(),is_active:B().default(!0),image:d().optional()});function Be({service:t,categories:b}){const[n,x]=h.useState(t.features||[""]),[f,v]=h.useState(!1),[F,S]=h.useState(t.image_url),a=T({resolver:P(J),defaultValues:{name:t.name,category_id:t.category_id.toString(),description:t.description,features:t.features||[""],is_active:t.is_active,image:t.image}}),N=async s=>{v(!0);try{await j.put(route("admin.services.update",t.id),{...s,features:n.filter(Boolean)},{onSuccess:()=>{g.success("Service updated successfully"),j.visit(route("admin.services.index"))},onError:r=>{g.error(r.message||"Something went wrong")}})}catch(r){console.error("Error updating service:",r),g.error("Failed to update service")}finally{v(!1)}},C=()=>{x([...n,""])},w=s=>{x(n.filter((r,i)=>i!==s))},E=(s,r)=>{const i=[...n];i[s]=r,x(i)},_=s=>{a.setValue("image",s),S(s)};return e.jsxs(X,{children:[e.jsx(I,{title:"Edit Service"}),e.jsx("div",{className:"container mx-auto py-10 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Edit Service"}),e.jsx(k,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(N),className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(c,{control:a.control,name:"name",render:({field:s})=>e.jsxs(l,{children:[e.jsx(o,{children:"Name"}),e.jsx(m,{children:e.jsx(y,{placeholder:"Enter service name",...s})}),e.jsx(p,{})]})}),e.jsx(c,{control:a.control,name:"category_id",render:({field:s})=>e.jsxs(l,{children:[e.jsx(o,{children:"Category"}),e.jsxs(A,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(m,{children:e.jsx(D,{children:e.jsx(R,{placeholder:"Select a category"})})}),e.jsx(U,{children:b.map(r=>e.jsx($,{value:r.id.toString(),children:r.name},r.id))})]}),e.jsx(p,{})]})})]}),e.jsx(c,{control:a.control,name:"description",render:({field:s})=>e.jsxs(l,{children:[e.jsx(o,{children:"Description"}),e.jsx(m,{children:e.jsx(z,{placeholder:"Enter service description",className:"min-h-[100px]",...s})}),e.jsx(p,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{children:"Features"}),e.jsxs(u,{type:"button",variant:"outline",size:"sm",onClick:C,children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Add Feature"]})]}),n.map((s,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{value:s,onChange:i=>E(r,i.target.value),placeholder:"Enter feature"}),e.jsx(u,{type:"button",variant:"ghost",size:"icon",onClick:()=>w(r),children:e.jsx(H,{className:"h-4 w-4"})})]},r))]}),e.jsx(c,{control:a.control,name:"image",render:({field:s})=>e.jsxs(l,{children:[e.jsx(o,{children:"Service Image"}),e.jsx(m,{children:e.jsx(q,{value:F,onChange:_,onRemove:()=>{S(null),s.onChange("")}})}),e.jsx(p,{})]})}),e.jsx(c,{control:a.control,name:"is_active",render:({field:s})=>e.jsxs(l,{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{children:"Active Status"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Enable or disable this service"})]}),e.jsx(m,{children:e.jsx(M,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>j.visit(route("admin.services.index")),children:"Cancel"}),e.jsx(u,{type:"submit",disabled:f,children:f?"Saving...":"Save Changes"})]})]})})]})})]})}export{Be as default};
