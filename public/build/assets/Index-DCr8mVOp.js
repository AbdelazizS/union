import{r as a,j as e,$ as U,m as d}from"./app-D5zgOKAD.js";import{t as r}from"./index-CDOhrpKr.js";import{B as b}from"./index-C8-8ZKTM.js";import{D as q}from"./data-table-xuiH6-jF.js";import{columns as z}from"./columns-DBPqTqsh.js";import{u as D}from"./form-B0NGfjOj.js";import{s as C}from"./zod-CTB78kiI.js";import{o as G,b as _,n as J,s as y}from"./index-DWbN24nP.js";import{D as p,a as M,b as h,c as u,d as x,e as T,f as Q}from"./dialog-sDPXERkU.js";import{TestimonialForm as F}from"./TestimonialForm-DR0TqvbG.js";import{L as W}from"./AdminLayout-BQ9sENZH.js";import{P as X}from"./plus-DHVrmD6B.js";import{S as Y}from"./star-CbgFmvPS.js";import"./index-BBAzO_4d.js";import"./table-C18x9kzE.js";import"./input-D5FKwQjB.js";import"./select-DgOef9zO.js";import"./index-BSVezLny.js";import"./index-Crc4BVh8.js";import"./Combination-Cmb1a147.js";import"./tslib.es6-CmEaCU22.js";import"./index-BB6OtDRK.js";import"./index-DNxp1Wi1.js";import"./index-BKYgjeKX.js";import"./index-CrEWOBzh.js";import"./chevron-down-CztE_ilu.js";import"./createLucideIcon-AWgR876W.js";import"./check-BhB20Pym.js";import"./dropdown-menu-CixTnASt.js";import"./index-Cuq-Mmvq.js";import"./chevron-right-DKEmXFr0.js";import"./badge-DAUpYQro.js";import"./ellipsis-D87pnp6L.js";import"./eye-nL3GmjNe.js";import"./pencil-DUvomj0i.js";import"./trash-Dn0Y1l6S.js";import"./label-BHpa9F8K.js";import"./index-B6dbISNz.js";import"./x-DkObbUL-.js";import"./switch-CQMIwMOV.js";import"./textarea-rFmGb7jf.js";import"./separator-ZBq7OQqG.js";import"./sheet-CpllKNoK.js";import"./layers-ai9ES5Yn.js";import"./calendar-CP_I-VWs.js";import"./circle-help-DHWhEvao.js";import"./file-text-CyaKJaEx.js";import"./user-Ch48qi0I.js";const O=G({customer_name:y().min(2,"Name must be at least 2 characters"),customer_email:y().email("Invalid email address"),comment:y().min(10,"Comment must be at least 10 characters"),rating:J().min(1).max(5),is_featured:_().default(!1),is_approved:_().default(!1)}),n={customer_name:"",customer_email:"",comment:"",rating:5,is_featured:!1,is_approved:!1};function Je({testimonials:E}){const[A,v]=a.useState(!1),[V,f]=a.useState(!1),[P,l]=a.useState(!1),[$,N]=a.useState(!1),[k,j]=a.useState(null),[o,g]=a.useState(null),[m,i]=a.useState(!1),w=D({resolver:C(O),defaultValues:n}),c=D({resolver:C(O),defaultValues:n}),S=()=>{d.reload({only:["testimonials"]})},B=async s=>{i(!0);try{d.post("/admin/testimonials",s,{onSuccess:()=>{r.success("Testimonial created successfully"),v(!1),w.reset(n),S()},onError:t=>{console.log(t),r.error(t.message||"Something went wrong")},onFinish:()=>{i(!1)}})}catch{r.error("Something went wrong"),i(!1)}},I=async s=>{i(!0);try{d.put(`/admin/testimonials/${k.id}`,s,{onSuccess:()=>{r.success("Testimonial updated successfully"),f(!1),c.reset(n),j(null),S()},onError:t=>{console.log(t),r.error(t.message||"Something went wrong")},onFinish:()=>{i(!1)}})}catch{r.error("Something went wrong"),i(!1)}},L=s=>{j(s),c.reset({...s,rating:Number(s.rating)}),f(!0)},R=async s=>{i(!0);try{d.delete(route("admin.testimonials.destroy",s.id),{onSuccess:()=>{r.success("Testimonial deleted successfully"),l(!1),g(null),S()},onError:t=>{r.error(t.message||"Something went wrong")},onFinish:()=>{i(!1)}})}catch{r.error("Something went wrong"),i(!1)}},H=s=>{g(s),N(!0)},K=s=>{g(s),l(!0)};return e.jsxs(W,{children:[e.jsx(U,{title:"Testimonials"}),e.jsxs("div",{className:"container mx-auto py-10 px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Testimonials"}),e.jsxs(p,{open:A,onOpenChange:s=>{s||w.reset(n),v(s)},children:[e.jsx(M,{asChild:!0,children:e.jsxs(b,{children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Add Testimonial"]})}),e.jsxs(h,{className:"max-w-2xl",children:[e.jsxs(u,{children:[e.jsx(x,{children:"Add New Testimonial"}),e.jsx(T,{children:"Fill in the details to create a new testimonial."})]}),e.jsx(F,{form:w,onSubmit:B,isSubmitting:m})]})]}),e.jsx(p,{open:V,onOpenChange:s=>{s||(c.reset(n),j(null)),f(s)},children:e.jsxs(h,{className:"max-w-2xl",children:[e.jsxs(u,{children:[e.jsx(x,{children:"Edit Testimonial"}),e.jsx(T,{children:"Update the details of this testimonial."})]}),e.jsx(F,{form:c,onSubmit:I,isSubmitting:m})]})})]}),e.jsx(q,{columns:z(L,K,H),data:E,searchKey:"customer_name"}),e.jsx(p,{open:P,onOpenChange:l,children:e.jsxs(h,{children:[e.jsxs(u,{children:[e.jsx(x,{children:"Delete Testimonial"}),e.jsx(T,{children:"Are you sure you want to delete this testimonial? This action cannot be undone."})]}),e.jsxs(Q,{children:[e.jsx(b,{variant:"outline",onClick:()=>l(!1),disabled:m,children:"Cancel"}),e.jsx(b,{variant:"destructive",onClick:()=>R(o),disabled:m,children:"Delete"})]})]})}),e.jsx(p,{open:$,onOpenChange:N,children:e.jsxs(h,{className:"max-w-2xl",children:[e.jsx(u,{children:e.jsx(x,{children:"View Testimonial Details"})}),o&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Customer Name"}),e.jsx("p",{children:o.customer_name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Email"}),e.jsx("p",{children:o.customer_email})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Comment"}),e.jsx("p",{className:"whitespace-pre-wrap",children:o.comment})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Rating"}),e.jsx("div",{className:"flex items-center",children:[...Array(o.rating)].map((s,t)=>e.jsx(Y,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"},t))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Featured Status"}),e.jsx("p",{children:o.is_featured?"Featured":"Not Featured"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Approval Status"}),e.jsx("p",{children:o.is_approved?"Approved":"Pending"})]})]})]})})]})]})}export{Je as default};
